<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='fee.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    :root {
        --primary-color: #2563eb;
        --secondary-color: #06b6d4;
        --success-color: #10b981;
        --error-color: #ef4444;
        --background-color: #ffffff;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --border-color: #e5e7eb;
        --card-bg: #ffffff;
        --hover-bg: #f9fafb;
    }

    body {
        background-color: var(--background-color);
        color: var(--text-primary);
    }

    .navbar {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        padding: 1rem 2rem;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
    }

    .nav-links {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .nav-links a {
        color: white;
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .nav-links a:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .card {
        background: var(--card-bg);
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid var(--border-color);
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.9rem;
    }

    .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: var(--card-bg);
        color: var(--text-primary);
    }

    .form-control:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        background: var(--card-bg);
    }

    .action-buttons {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .btn-edit,
    .btn-delete,
    .btn-view {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-edit {
        background-color: var(--accent-color);
        color: white;
    }

    .btn-delete {
        background-color: var(--error-color);
        color: white;
    }

    .btn-view {
        background-color: var(--success-color);
        color: white;
    }

    .btn-edit:hover,
    .btn-delete:hover,
    .btn-view:hover {
        transform: translateY(-2px);
        filter: brightness(110%);
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s;
        margin-top: 1rem;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--primary-color), #1d4ed8);
        color: white;
        border: none;
        font-weight: 600;
    }

    .btn-primary:hover {
        background: linear-gradient(135deg, #1d4ed8, var(--primary-color));
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .btn-secondary {
        background-color: var(--secondary-color);
        color: white;
    }

    .table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
    }

    .table th,
    .table td {
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        text-align: left;
    }

    .table th {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        font-weight: 600;
    }

    .hidden {
        display: none;
    }

    .export-options {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
    }

    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }

    .modal-content {
        background: var(--card-bg);
        padding: 2rem;
        border-radius: 12px;
        width: 400px;
        max-width: 90%;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--border-color);
    }

    /* Modern Button Styles */
    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        min-width: 120px;
        text-transform: uppercase;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .btn:active {
        transform: translateY(1px);
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--primary-color) 0%, #1d4ed8 100%);
        color: white;
    }

    .btn-primary:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, var(--primary-color) 100%);
    }

    .btn-secondary {
        background: linear-gradient(135deg, var(--secondary-color) 0%, #0891b2 100%);
        color: white;
    }

    .btn-secondary:hover {
        background: linear-gradient(135deg, #0891b2 0%, var(--secondary-color) 100%);
    }

    .btn-success {
        background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
        color: white;
    }

    .btn-success:hover {
        background: linear-gradient(135deg, #059669 0%, var(--success-color) 100%);
    }

    /* Enhanced Card Styles */
    .card {
        background: var(--card-bg);
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid var(--border-color);
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);
    }

    /* Form Styling */
    .form-group {
        margin-bottom: 1.5rem;
        position: relative;
    }

    .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background-color: var(--card-bg);
        color: var(--text-primary);
    }

    .form-control:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        outline: none;
        background-color: var(--card-bg);
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    /* Table Styling */
    .table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 1rem;
        border-radius: 8px;
        overflow: hidden;
    }

    .table th,
    .table td {
        padding: 1rem;
        border: 1px solid #e1e1e1;
        text-align: left;
    }

    .table th {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
    }

    .table tr:nth-child(even) {
        background-color: var(--hover-bg);
    }

    .table tr:hover {
        background-color: rgba(37, 99, 235, 0.05);
    }

    /* Section Headers */
    h2,
    h3 {
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
    }

    h2:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 50px;
        height: 3px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        border-radius: 3px;
    }

    /* Information Display Sections */
    #studentInfoDisplay,
    #feeUpdateInfoDisplay {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 2px solid var(--border-color);
    }

    /* Navigation Links */
    .nav-links {
        display: flex;
        gap: 1rem;
        padding: 1rem;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        border-radius: 8px;
        margin-bottom: 2rem;
    }

    .nav-links a {
        color: white;
        text-decoration: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .nav-links a:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .nav-links {
            flex-direction: column;
        }

        .btn {
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .card {
            padding: 1rem;
        }

        .table {
            display: block;
            overflow-x: auto;
        }
    }

    /* Success Message Animation */
    @keyframes slideIn {
        0% {
            transform: translateY(-100%);
            opacity: 0;
        }

        100% {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .success-message {
        background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
        color: white;
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        animation: slideIn 0.3s ease-out;
    }

    /* Loading States */
    .btn.loading {
        position: relative;
        pointer-events: none;
        opacity: 0.8;
    }

    .btn.loading:after {
        content: '';
        position: absolute;
        width: 20px;
        height: 20px;
        border: 2px solid transparent;
        border-top-color: currentColor;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    /* Input Focus Effects */
    .form-control:focus+label {
        color: var(--primary-color);
    }

    /* Custom Select Styling */
    select.form-control {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%232c3e50' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        padding-right: 2.5rem;
    }

    /* Modern Data Statistics Cards */
    .data-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .data-card {
        background: var(--card-bg);
        padding: 1.5rem;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        text-align: center;
        position: relative;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }

    .data-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }

    .data-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.12);
    }

    .data-card h3 {
        color: var(--text-primary);
        font-size: 1.1rem;
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .data-card p {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin: 0;
        line-height: 1;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .data-stats {
            grid-template-columns: 1fr;
        }

        .data-card {
            padding: 1.25rem;
        }

        .data-card p {
            font-size: 2rem;
        }
    }

    .payment-history-section {
        margin-top: 2rem;
        background: var(--card-bg);
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--border-color);
    }

    .payment-filters {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .payment-filters .form-control {
        max-width: 200px;
    }

    .payment-table {
        margin-top: 1rem;
    }

    .payment-table th {
        background: var(--primary-color);
        color: white;
        font-weight: 600;
    }

    .payment-summary-card {
        display: flex;
        justify-content: space-between;
        background: var(--hover-bg);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
        border: 1px solid var(--border-color);
    }

    .summary-item {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .summary-label {
        font-size: 0.875rem;
        color: #666;
    }

    .summary-value {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--primary-color);
    }

    .receipt-btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
    }

    .payment-actions {
        display: flex;
        gap: 0.5rem;
    }

    .sliding-nav {
        position: fixed;
        left: -280px;
        top: 0;
        width: 280px;
        height: 100%;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        z-index: 1000;
        transition: 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    }

    .sliding-nav.active {
        left: 0;
    }

    .nav-profile {
        padding: 20px;
        background: rgba(0, 0, 0, 0.2);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .profile-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .profile-icon {
        font-size: 24px;
    }

    .nav-close {
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 5px;
    }

    .nav-links {
        padding: 20px 0;
        display: flex;
        flex-direction: column;
    }

    .nav-item {
        color: white;
        text-decoration: none;
        padding: 15px 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: 0.3s;
    }

    .nav-item:hover {
        background: rgba(255, 255, 255, 0.1);
        padding-left: 25px;
    }

    .nav-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        width: 40px;
        height: 40px;
        background: var(--primary-color);
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 6px;
        padding: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .nav-toggle span {
        display: block;
        width: 100%;
        height: 2px;
        background: white;
        transition: 0.3s;
    }

    .content-wrapper {
        transition: margin-left 0.3s ease;
        margin-left: 0;
        min-height: 100vh;
    }

    .content-wrapper.shifted {
        margin-left: 280px;
    }

    @media (max-width: 768px) {
        .sliding-nav {
            width: 250px;
            left: -250px;
        }

        .content-wrapper.shifted {
            margin-left: 0;
        }
    }

    .student-basic-info {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--border-color);
    }

    .info-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 15px;
    }

    .info-item {
        padding: 10px;
        background: var(--hover-bg);
        border-radius: 6px;
        border: 1px solid var(--border-color);
    }

    .info-label {
        font-weight: 600;
        color: #2c3e50;
        margin-right: 10px;
    }

    .year-wise-section {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--border-color);
    }

    .year-selector {
        margin: 20px 0;
    }

    .fee-summary {
        margin-bottom: 20px;
    }

    .fee-container {
        display: grid;
        gap: 10px;
        margin-top: 15px;
        padding: 15px;
        background: var(--hover-bg);
        border-radius: 6px;
        border: 1px solid var(--border-color);
    }

    .fee-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #eee;
    }

    .fee-label {
        font-weight: 600;
        color: #2c3e50;
    }

    .payment-history {
        margin-top: 20px;
    }

    .payment-history table {
        margin-top: 15px;
        width: 100%;
    }

    .payment-history th {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 12px;
    }

    .payment-history td {
        padding: 10px;
        border-bottom: 1px solid #eee;
    }

    h3,
    h4 {
        color: var(--text-primary);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--primary-color);
    }

    /* Modern Table Header Styles */
    .payment-history table th {
        background: linear-gradient(135deg, #2b00ff, #1604e3);
        /* Golden yellow gradient */
        color: #000000;
        padding: 1.2rem 1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.95rem;
        text-align: left;
        border: none;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .payment-history table th:hover {
        background: linear-gradient(135deg, #FFA500, #FFD700);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
    }

    /* Add subtle glow effect */
    .payment-history table th::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .payment-history table th:hover::after {
        opacity: 1;
    }

    /* Text Shadow for better visibility */
    .payment-history table th {
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    }

    /* Rounded corners for first and last headers */
    .payment-history table th:first-child {
        border-top-left-radius: 8px;
    }

    .payment-history table th:last-child {
        border-top-right-radius: 8px;
    }

    /* Modern Portfolio-style CSS additions */

    /* Custom Properties */
    :root {
        /* Color Scheme */
        --primary-gradient: linear-gradient(135deg, #4a90e2 0%, #000DFF 100%);
        --secondary-gradient: linear-gradient(135deg, #FF6B6B 0%, #FF000D 100%);
        --surface-gradient: linear-gradient(135deg, #F8F9FE 0%, #FFFFFF 100%);

        /* Updated Colors */
        --primary-color: #4A90E2;
        --secondary-color: #5C6AC4;
        --accent-color: #FF6B6B;
        --success-color: #2ECC71;
        --warning-color: #F1C40F;
        --danger-color: #E74C3C;
        --info-color: #3498DB;

        /* Text Colors */
        --text-primary: #2C3E50;
        --text-secondary: #7C8CA1;
        --text-tertiary: #A9B9CC;

        /* Background Colors */
        --bg-primary: #FFFFFF;
        --bg-secondary: #F8FAFC;
        --bg-tertiary: #EEF2F7;

        /* Spacing */
        --spacing-xs: 0.25rem;
        --spacing-sm: 0.5rem;
        --spacing-md: 1rem;
        --spacing-lg: 1.5rem;
        --spacing-xl: 2rem;

        /* Border Radius */
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 16px;
        --radius-xl: 24px;

        /* Shadows */
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
    }

    /* Modern Card Styles */
    .modern-card {
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow-md);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .modern-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }

    .modern-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: var(--primary-gradient);
    }

    /* Glass Morphism Effects */
    .glass-card {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
    }

    /* Modern Button Styles */
    .btn-modern {
        padding: 12px 24px;
        border-radius: var(--radius-md);
        border: none;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        cursor: pointer;
    }

    .btn-modern::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.6s ease, height 0.6s ease;
    }

    .btn-modern:hover::before {
        width: 300px;
        height: 300px;
    }

    /* Modern Input Styles */
    .input-modern {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid var(--bg-tertiary);
        border-radius: var(--radius-md);
        font-size: 1rem;
        transition: all 0.3s ease;
        background: var(--bg-secondary);
    }

    .input-modern:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.1);
        outline: none;
    }

    /* Modern Table Styles */
    .table-modern {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-sm);
    }

    .table-modern th,
    .table-modern td {
        padding: var(--spacing-md);
        border-bottom: 1px solid var(--bg-tertiary);
    }

    .table-modern th {
        background: var(--bg-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.875rem;
        color: var(--text-secondary);
    }

    .table-modern tr:last-child td {
        border-bottom: none;
    }

    .table-modern tr:hover {
        background: var(--bg-secondary);
    }

    /* Modern Navigation Styles */
    .nav-modern {
        background: var(--bg-primary);
        padding: var(--spacing-md) var(--spacing-lg);
        box-shadow: var(--shadow-sm);
        position: sticky;
        top: 0;
        z-index: 1000;
    }

    .nav-link-modern {
        position: relative;
        padding: var(--spacing-sm) var(--spacing-md);
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
    }

    .nav-link-modern::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 2px;
        background: var (--primary-gradient);
        transition: width 0.3s ease;
    }

    .nav-link-modern:hover {
        color: var(--primary-color);
    }

    .nav-link-modern:hover::after {
        width: 100%;
    }

    /* Modern Grid Layout */
    .grid-modern {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--spacing-lg);
        padding: var(--spacing-lg);
    }

    /* Modern Animations */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fadeIn {
        animation: fadeIn 0.6s ease forwards;
    }

    /* Modern Loading Spinner */
    .spinner-modern {
        width: 40px;
        height: 40px;
        border: 3px solid var(--bg-tertiary);
        border-top-color: var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* Modern Toast Notifications */
    .toast-modern {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: var(--spacing-md) var(--spacing-lg);
        background: var(--bg-primary);
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-lg);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .toast-modern.show {
        transform: translateY(0);
        opacity: 1;
    }

    /* Modern Scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-secondary);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--text-tertiary);
        border-radius: var(--radius-md);
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--text-secondary);
    }

    /* Modern Form Groups */
    .form-group-modern {
        margin-bottom: var(--spacing-lg);
    }

    .form-group-modern label {
        display: block;
        margin-bottom: var(--spacing-sm);
        color: var(--text-secondary);
        font-weight: 500;
    }

    /* Modern Badges */
    .badge-modern {
        padding: 4px 8px;
        border-radius: var(--radius-sm);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .badge-modern.primary {
        background: var(--primary-color);
        color: white;
    }

    .badge-modern.success {
        background: var(--success-color);
        color: white;
    }

    .badge-modern.warning {
        background: var(--warning-color);
        color: white;
    }

    .badge-modern.danger {
        background: var(--danger-color);
        color: white;
    }

    /* Responsive Design Enhancements */
    @media (max-width: 768px) {
        .grid-modern {
            grid-template-columns: 1fr;
        }

        .nav-modern {
            padding: var(--spacing-sm);
        }

        .table-modern {
            display: block;
            overflow-x: auto;
        }
    }

    /* Dark Mode Support */
    @media (prefers-color-scheme: dark) {
        :root {
            --bg-primary: #1A1A1A;
            --bg-secondary: #2D2D2D;
            --bg-tertiary: #3D3D3D;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-tertiary: #808080;
        }

        .glass-card {
            background: rgba(45, 45, 45, 0.7);
        }
    }

    /* Print Styles */
    @media print {

        .nav-modern,
        .btn-modern {
            display: none;
        }

        .modern-card {
            box-shadow: none;
            border: 1px solid #ddd;
        }
    }

    /* Modern Portfolio-Style Enhancements */
    :root {
        /* Modern Color Palette */
        --gradient-cool: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        --gradient-warm: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%);
        --gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
        --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        --surface-glass: rgba(255, 255, 255, 0.7);
        --shadow-glass: 0 8px 32px rgba(31, 38, 135, 0.15);
    }

    /* Modern Card Hover Effects */
    .card {
        position: relative;
        overflow: hidden;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent);
        transition: 0.5s;
    }

    .card:hover::before {
        left: 100%;
    }

    /* Emoji & Icon Decorations */
    .form-group label::before {
        margin-right: 8px;
    }

    label[for="studentName"]::before {
        content: '👤 ';
    }

    label[for="rollNumber"]::before {
        content: '🔢 ';
    }

    label[for="gender"]::before {
        content: '⚥ ';
    }

    label[for="category"]::before {
        content: '📋 ';
    }

    label[for="academicYear"]::before {
        content: '📅 ';
    }

    label[for="branch"]::before {
        content: '🏛️ ';
    }

    label[for="feeType"]::before {
        content: '💰 ';
    }

    label[for="billNumber"]::before {
        content: '🧾 ';
    }

    label[for="totalAmount"]::before {
        content: '💵 ';
    }

    label[for="paidAmount"]::before {
        content: '✅ ';
    }

    /* Modern Glass Cards */
    .glass-card {
        background: var(--surface-glass);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: var(--shadow-glass);
    }

    /* Animated Button Hover */
    .btn {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .btn::after {
        content: '';
        position: absolute;
        width: 0;
        height: 100%;
        top: 0;
        left: 0;
        background: rgba(255, 255, 255, 0.2);
        transition: width 0.3s ease;
    }

    .btn:hover::after {
        width: 100%;
    }

    /* Modern Form Controls */
    .form-control {
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
    }

    .form-control:focus {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    /* Modern Table Animations */
    .table tr {
        transition: transform 0.3s ease, background-color 0.3s ease;
    }

    .table tr:hover {
        transform: scale(1.01);
        background-color: rgba(99, 102, 241, 0.05);
    }

    /* Modern Status Indicators */
    .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
    }

    .status-badge.success {
        background: var(--gradient-success);
        color: white;
    }

    .status-badge.pending {
        background: var(--gradient-warning);
        color: white;
    }

    /* Modern Loading Animation */
    .loading-spinner {
        width: 2.5rem;
        height: 2.5rem;
        border: 3px solid rgba(99, 102, 241, 0.1);
        border-radius: 50%;
        border-top-color: #6366f1;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* Modern Toast Notifications */
    .toast {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        padding: 1rem 1.5rem;
        border-radius: 0.5rem;
        background: var(--surface-glass);
        backdrop-filter: blur(10px);
        box-shadow: var(--shadow-glass);
        transform: translateY(100%);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .toast.show {
        transform: translateY(0);
        opacity: 1;
    }

    /* Modern Navigation Indicators */
    .nav-item {
        position: relative;
    }

    .nav-item::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 0;
        height: 2px;
        background: currentColor;
        transition: width 0.3s ease;
    }

    .nav-item:hover::after {
        width: 100%;
    }

    /* Modern Scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(99, 102, 241, 0.5);
        border-radius: 4px;
        transition: background 0.3s ease;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(99, 102, 241, 0.7);
    }

    /* Modern Section Headers */
    h2,
    h3 {
        position: relative;
        padding-bottom: 0.75rem;
    }

    h2::after,
    h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 60px;
        height: 4px;
        background: var(--gradient-cool);
        border-radius: 2px;
    }

    /* Data Card Hover Effects */
    .data-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
    }

    .data-card:hover {
        transform: translateY(-10px) rotate(1deg);
    }

    .data-card:hover i {
        transform: scale(1.2);
    }

    /* Modern Input Groups */
    .input-group {
        position: relative;
        overflow: hidden;
        border-radius: 0.5rem;
    }

    .input-group input {
        border: none;
        background: transparent;
        position: relative;
        z-index: 1;
    }

    .input-group::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--surface-glass);
        backdrop-filter: blur(10px);
        z-index: 0;
    }

    /* Modern Focus Effects */
    .form-control:focus {
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        border-color: #6366f1;
    }

    /* Add these styles to your existing CSS */

    /* Welcome Banner Styles */
    .welcome-banner {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        padding: 2rem;
        border-radius: 16px;
        text-align: center;
        color: white;
        margin-bottom: 2rem;
        box-shadow: 0 4px 20px rgba(37, 99, 235, 0.15);
        position: relative;
        overflow: hidden;
    }

    .welcome-banner::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 100%);
        pointer-events: none;
    }

    .banner-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    .welcome-banner h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: 700;
    }

    .welcome-banner p {
        font-size: 1.1rem;
        opacity: 0.9;
    }

    /* Quick Actions Grid */
    .quick-actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
        max-width: 800px;
        /* Added to maintain proper width with two cards */
        margin-left: auto;
        margin-right: auto;
    }

    .action-card {
        background: var(--card-bg);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        position: relative;
        overflow: hidden;
    }

    .action-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .card-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
        transition: all 0.3s ease;
    }

    .action-card:hover .card-icon {
        transform: scale(1.1);
    }

    .card-content h3 {
        font-size: 1.25rem;
        margin-bottom: 0.75rem;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .card-content p {
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
    }

    /* Quick Stats Styling */
    .quick-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-top: 1rem;
    }

    .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 0.75rem;
        background: rgba(37, 99, 235, 0.1);
        border-radius: 12px;
        transition: all 0.3s ease;
    }

    .stat-item:hover {
        background: rgba(37, 99, 235, 0.2);
        transform: translateY(-2px);
    }

    .stat-item i {
        font-size: 1.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    .stat-item span {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 0.25rem;
    }

    .stat-item label {
        font-size: 0.85rem;
        color: var(--text-secondary);
    }

    /* Card Theme Colors */
    .student-card .card-icon {
        color: #4299e1;
    }

    .fee-card .card-icon {
        color: #48bb78;
    }

    .stats-card .card-icon {
        color: #667eea;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .welcome-banner {
            padding: 1.5rem;
        }

        .welcome-banner h1 {
            font-size: 2rem;
        }

        .quick-actions-grid {
            grid-template-columns: 1fr;
        }

        .quick-stats {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .transaction-section {
        margin-top: 2rem;
        padding: 1.5rem;
    }

    .transaction-item {
        margin-bottom: 1rem;
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: 8px;
    }

    .transaction-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .bill-number-input {
        display: flex;
        gap: 0.5rem;
        align-items: center;
    }

    .transaction-form {
        margin-bottom: 2rem;
    }

    /* Add these styles to your existing style section */
    .complaint-card {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .complaint-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .complaint-header h3 {
        margin: 0;
        color: #2c3e50;
    }

    .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 999px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .status-badge.pending {
        background: #f1c40f;
        color: #000;
    }

    .status-badge.resolved {
        background: #2ecc71;
        color: white;
    }

    .status-badge.rejected {
        background: #e74c3c;
        color: white;
    }

    .complaint-body {
        margin-bottom: 1rem;
    }

    .student-info {
        color: #666;
        margin-bottom: 0.5rem;
    }

    .complaint-text {
        margin-bottom: 0.5rem;
    }

    .complaint-date {
        font-size: 0.875rem;
        color: #666;
    }

    .complaint-actions {
        border-top: 1px solid #eee;
        padding-top: 1rem;
        margin-top: 1rem;
    }

    .action-buttons {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .complaint-response {
        margin-top: 1rem;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 4px;
    }

    .complaints-container {
        padding: 2rem;
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
    }

    .complaints-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .complaints-filter {
        background: var(--bg-secondary);
        padding: 0.5rem;
        border-radius: var(--radius-md);
        display: inline-flex;
        gap: 0.5rem;
    }

    .filter-select {
        min-width: 200px;
        padding: 0.75rem;
        border: 2px solid var(--bg-tertiary);
        border-radius: var(--radius-md);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-weight: 500;
    }

    .complaint-card {
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: var(--shadow-sm);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid var(--bg-tertiary);
    }

    .complaint-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .complaint-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--bg-tertiary);
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .status-badge.pending {
        background: var(--gradient-warning);
        color: white;
    }

    .status-badge.resolved {
        background: var(--gradient-success);
        color: white;
    }

    .status-badge.rejected {
        background: var(--gradient-warm);
        color: white;
    }

    .complaint-body {
        margin-bottom: 1.5rem;
    }

    .student-info {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-bottom: 1rem;
        color: var(--text-secondary);
    }

    .complaint-text {
        font-size: 1rem;
        line-height: 1.6;
        color: var(--text-primary);
        margin-bottom: 1rem;
    }

    .complaint-date {
        font-size: 0.875rem;
        color: var(--text-tertiary);
    }

    .complaint-actions {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: var(--radius-md);
        margin-top: 1.5rem;
    }

    .action-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .complaint-response {
        margin-top: 1.5rem;
        padding: 1.5rem;
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        border-left: 4px solid var(--primary-color);
    }

    /* Modern Profile Page Styles */
    .profile-header {
        display: flex;
        align-items: center;
        gap: 2rem;
        padding: 2rem;
        margin-bottom: 2rem;
        background: var(--gradient-cool);
        border-radius: var(--radius-lg);
        color: white;
    }

    .profile-avatar {
        background: rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: 50%;
        backdrop-filter: blur(10px);
    }

    .profile-info {
        flex: 1;
    }

    .profile-info h3 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }

    .profile-form {
        display: grid;
        gap: 1.5rem;
        padding: 2rem;
    }

    .password-section {
        padding: 2rem;
        margin: 2rem 0;
        background: var(--bg-secondary);
        border-radius: var(--radius-lg);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
        justify-content: flex-end;
    }

    /* Modern Complaints Page Styles */
    .complaints-container {
        padding: 2rem;
        background: var(--bg-primary);
    }

    .complaints-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--bg-tertiary);
    }

    .complaints-filter {
        padding: 0.5rem;
        border-radius: var(--radius-md);
    }

    .complaint-card {
        margin-bottom: 1.5rem;
        transition: transform 0.3s ease;
    }

    .complaint-card:hover {
        transform: translateY(-5px);
    }

    .complaint-response {
        background: var(--gradient-cool);
        color: white;
        padding: 1.5rem;
        border-radius: var(--radius-md);
        margin-top: 1.5rem;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .status-badge.pending {
        background: var (--gradient-warning);
        color: white;
    }

    .status-badge.resolved {
        background: var(--gradient-success);
        color: white;
    }

    .status-badge.rejected {
        background: var(--gradient-warm);
        color: white;
    }

    .empty-state {
        text-align: center;
        padding: 3rem;
        color: var(--text-secondary);
    }

    .empty-state i {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--text-tertiary);
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .profile-header {
            flex-direction: column;
            text-align: center;
            padding: 1.5rem;
        }

        .complaints-header {
            flex-direction: column;
            gap: 1rem;
        }

        .complaints-filter {
            width: 100%;
        }

        .action-buttons {
            flex-direction: column;
        }

        .btn-modern {
            width: 100%;
        }
    }

    /* Profile Page Styles */
    .profile-container {
        height: calc(100vh - 4rem);
        display: flex;
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
    }

    .profile-header {
        padding: 1.5rem;
        display: flex;
        align-items: center;
        gap: 2rem;
        background: var(--gradient-cool);
        color: white;
    }

    .profile-content {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .password-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    /* Complaints Page Styles */
    .complaints-container {
        height: calc(100vh - 4rem);
        display: flex;
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
    }

    .complaints-header {
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: var(--bg-primary);
        border-bottom: 2px solid var(--bg-tertiary);
    }

    .complaints-content {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
    }

    .complaints-list {
        display: grid;
        gap: 1rem;
        padding: 0.5rem;
    }

    .complaint-card {
        background: var(--bg-primary);
        border-radius: var(--radius-md);
        padding: 1.5rem;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--bg-tertiary);
    }

    /* Custom Scrollbar */
    .profile-content::-webkit-scrollbar,
    .complaints-content::-webkit-scrollbar {
        width: 6px;
    }

    .profile-content::-webkit-scrollbar-track,
    .complaints-content::-webkit-scrollbar-track {
        background: var(--bg-secondary);
        border-radius: 3px;
    }

    .profile-content::-webkit-scrollbar-thumb,
    .complaints-content::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 3px;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {

        .profile-header,
        .complaints-header {
            flex-direction: column;
            gap: 1rem;
            text-align: center;
        }

        .form-grid,
        .password-grid {
            grid-template-columns: 1fr;
        }

        .complaints-filter {
            width: 100%;
        }
    }

    /* Modern Container Styles */
    .modern-profile-container,
    .modern-complaints-container {
        height: calc(100vh - 2rem);
        max-height: 800px;
        margin: 1rem auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        background: var(--bg-primary);
        border-radius: 1rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    /* Glass Effect */
    .glass-effect {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
    }

    /* Profile Styles */
    .profile-header {
        padding: 2rem;
        display: flex;
        align-items: center;
        gap: 2rem;
        background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
        color: white;
    }

    .profile-content-wrapper {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
    }

    .form-section {
        margin-bottom: 2rem;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 1rem;
    }

    .modern-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #e1e1e1;
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
    }

    .modern-input:focus {
        border-color: #4a90e2;
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        outline: none;
    }

    /* Complaints Styles */
    .complaints-header {
        padding: 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .complaints-content {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
    }

    .complaints-grid {
        display: grid;
        gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .modern-select {
        padding: 0.75rem 2rem 0.75rem 1rem;
        border: 2px solid #e1e1e1;
        border-radius: 0.5rem;
        font-size: 1rem;
        background: white;
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%234a90e2' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
    }

    /* Custom Scrollbar */
    .profile-content-wrapper::-webkit-scrollbar,
    .complaints-content::-webkit-scrollbar {
        width: 6px;
    }

    .profile-content-wrapper::-webkit-scrollbar-track,
    .complaints-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }

    .profile-content-wrapper::-webkit-scrollbar-thumb,
    .complaints-content::-webkit-scrollbar-thumb {
        background: #4a90e2;
        border-radius: 3px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {

        .modern-profile-container,
        .modern-complaints-container {
            height: calc(100vh - 1rem);
            margin: 0.5rem;
        }

        .profile-header {
            flex-direction: column;
            text-align: center;
            padding: 1rem;
        }

        .complaints-header {
            flex-direction: column;
            gap: 1rem;
        }

        .modern-select {
            width: 100%;
        }

        .form-actions {
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-actions button {
            width: 100%;
        }
    }

    /* Modern UI Variables */
    :root {
        --primary-color: #4a90e2;
        --secondary-color: #2c3e50;
        --success-color: #2ecc71;
        --warning-color: #f1c40f;
        --danger-color: #e74c3c;
        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --bg-primary: #ffffff;
        --bg-secondary: #f8fafc;
        --transition-speed: 0.3s;
        --border-radius: 12px;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
    }

    /* Container Styles */
    .modern-profile-container,
    .modern-complaints-container {
        height: calc(100vh - 2rem);
        max-height: 900px;
        background: var(--bg-primary);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-lg);
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* Glass Effect */
    .glass-effect {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: var(--shadow-md);
    }

    /* Header Styles */
    .profile-header,
    .complaints-header {
        padding: 1.5rem;
        background: linear-gradient(135deg, var(--primary-color), #357abd);
        color: white;
    }

    /* Content Scroll Areas */
    .profile-content-scroll,
    .complaints-content-scroll {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-color) var(--bg-secondary);
    }

    /* Modern Form Styles */
    .modern-form {
        max-width: 1200px;
        margin: 0 auto;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .input-wrapper {
        position: relative;
    }

    .modern-input,
    .modern-select {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #e1e1e1;
        border-radius: 8px;
        font-size: 1rem;
        transition: all var(--transition-speed);
        background: var(--bg-primary);
    }

    .modern-input:focus,
    .modern-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        outline: none;
    }

    /* Complaints Grid */
    .complaints-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 1rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {

        .modern-profile-container,
        .modern-complaints-container {
            height: calc(100vh - 1rem);
            margin: 0.5rem;
        }

        .form-grid,
        .password-grid {
            grid-template-columns: 1fr;
        }

        .complaints-header {
            flex-direction: column;
            gap: 1rem;
        }

        .filter-section {
            width: 100%;
        }
    }

    /* Accessibility Improvements */
    .form-label {
        color: var(--text-primary);
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }

    /* Animation Effects */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .complaint-card {
        animation: fadeIn 0.3s ease-out;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-secondary);
        border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 3px;
    }

    /* Information Page Styles */
    .student-basic-info,
    .fee-details-section,
    .payment-history-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }

    .info-item {
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }

    .info-label {
        font-weight: 600;
        color: #06edce;
        margin-bottom: 5px;
        display: block;
    }

    .info-value {
        color: #06eee6;
        font-size: 1.1rem;
    }

    .fee-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }

    .fee-item {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }

    .table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 15px;
    }

    .table th {
        background: #4a90e2;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: 500;
    }

    .table td {
        padding: 12px;
        border-bottom: 1px solid #edf2f7;
    }

    .table tr:hover td {
        background: #f8fafc;
    }

    .search-box {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    @media (max-width: 768px) {

        .info-grid,
        .fee-details {
            grid-template-columns: 1fr;
        }

        .search-box {
            flex-direction: column;
        }

        .search-box .btn {
            width: 100%;
        }
    }

    /* Add these styles for better presentation */
    .year-wise-section {
        margin-top: 2rem;
        padding: 1.5rem;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .year-selector {
        margin: 1rem 0;
    }

    .fee-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 1rem 0;
    }

    .fee-item {
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }

    .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 999px;
        font-size: 0.875rem;
        font-weight: 500;
    }

    .status-badge.paid {
        background: #d1fae5;
        color: #065f46;
    }

    .status-badge.pending {
        background: #fef3c7;
        color: #92400e;
    }

    .table-responsive {
        overflow-x: auto;
        margin-top: 1rem;
    }

    @media (max-width: 768px) {
        .fee-details {
            grid-template-columns: 1fr;
        }
    }

    .status-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .status-card {
        padding: 1.5rem;
        border-radius: 8px;
        text-align: center;
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .status-card.pending {
        border-left: 4px solid #f1c40f;
    }

    .status-card.verified {
        border-left: 4px solid #2ecc71;
    }

    .status-card.rejected {
        border-left: 4px solid #e74c3c;
    }

    .toast-message {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 2rem;
        border-radius: 4px;
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
    }

    .toast-message.success {
        background: #2ecc71;
        color: white;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }

        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    /* Add these styles in the style section */

    /* Fee Verification Page Styles */
    #feeVerificationPage {
        padding: 2rem;
    }

    .transaction-list {
        margin-top: 1.5rem;
    }

    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background: white;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        position: relative;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid #e1e1e1;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-header h3 {
        margin: 0;
        color: var(--text-primary);
    }

    .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-secondary);
    }

    .modal-body {
        padding: 1.5rem;
    }

    .modal-footer {
        padding: 1.5rem;
        border-top: 1px solid #e1e1e1;
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
    }

    /* Button Styles */
    .btn-verify {
        background: var(--success-color);
        color: white;
    }

    .btn-reject {
        background: var(--danger-color);
        color: white;
    }

    .btn-cancel {
        background: var(--secondary-color);
        color: white;
    }

    /* Transaction Card Styles */
    .transaction-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border: 1px solid #e1e1e1;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .transaction-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .transaction-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e1e1e1;
    }

    .transaction-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .detail-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .detail-label {
        color: #666;
        font-size: 0.9rem;
    }

    .detail-value {
        font-weight: 600;
        color: #2c3e50;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 999px;
        font-size: 0.875rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .status-badge.pending {
        background: #fff3cd;
        color: #856404;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal.show {
        display: flex;
    }

    .modal-content {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .toast-modern {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1100;
    }

    .toast-modern.show {
        transform: translateY(0);
        opacity: 1;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow-x: hidden;
        background-color: #ffffff;
    }

    .background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
    }

    .gradient-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        opacity: 0.3;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="0" y="0" width="100" height="100" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></svg>');
        opacity: 0.2;
    }

    .bubbles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .bubble {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(1px);
        animation: float 8s ease-in-out infinite;
    }

    /* Content Section (Demo) */
    .content {
        position: relative;
        max-width: 1200px;
        margin: 0 auto;
        padding: 80px 20px;
        color: var(--text-primary);
    }

    .header {
        text-align: center;
        margin-bottom: 60px;
    }

    .header h1 {
        font-size: 3.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .header p {
        font-size: 1.2rem;
        color: var(--text-secondary);
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    @keyframes float {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 0.8;
        }

        50% {
            transform: translateY(-20px) rotate(180deg);
            opacity: 0.5;
        }

        100% {
            transform: translateY(0) rotate(360deg);
            opacity: 0.8;
        }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .header h1 {
            font-size: 2.5rem;
        }

        .header p {
            font-size: 1rem;
        }
    }

    /* Add these modern text styles to your existing CSS */

    /* Modern Typography System */
    :root {
        /* Color palette for text */
        --text-gradient-1: linear-gradient(45deg, #FF6B6B, #FFE66D);
        --text-gradient-2: linear-gradient(45deg, #4834D4, #686DE0);
        --text-gradient-3: linear-gradient(45deg, #6AB04C, #BADC58);

        /* Font settings */
        --font-primary: 'Segoe UI', system-ui, -apple-system, sans-serif;
        --font-secondary: 'Poppins', sans-serif;
    }

    /* Modern Headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--font-primary);
        background: var(--text-gradient-1);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
        line-height: 1.2;
        font-weight: 700;
        letter-spacing: -0.5px;
    }

    h1 {
        font-size: 2.5rem;
        background-image: linear-gradient(45deg, #FF6B6B, #FFE66D);
    }

    h2 {
        font-size: 2rem;
        background-image: linear-gradient(45deg, #4834D4, #686DE0);
    }

    h3 {
        font-size: 1.75rem;
        background-image: linear-gradient(45deg, #6AB04C, #BADC58);
    }

    /* Card Title Styling */
    .card-content h3 {
        color: #2D3436;
        font-weight: 600;
        font-size: 1.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, #0652DD, #1289A7);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        transition: all 0.3s ease;
    }

    /* Label Styling */
    .form-group label {
        color: #2D3436;
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 0.5rem;
        background: linear-gradient(45deg, #5758BB, #1289A7);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Value Text Styling */
    .info-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: #2D3436;
        background: linear-gradient(45deg, #30336B, #130F40);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Status Badge Text */
    .status-badge {
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .status-badge.success {
        background: linear-gradient(45deg, #20BF6B, #78E08F);
    }

    .status-badge.pending {
        background: linear-gradient(45deg, #FFA502, #FFBE76);
    }

    .status-badge.error {
        background: linear-gradient(45deg, #EB4D4B, #FF7979);
    }

    /* Welcome Message */
    .welcome-banner h1 {
        font-size: 3rem;
        font-weight: 800;
        background: linear-gradient(45deg, #4834D4, #686DE0, #6AB04C);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .welcome-banner p {
        font-size: 1.2rem;
        color: #2faacc;
        line-height: 1.6;
        background: linear-gradient(45deg, #30336B, #14bec4);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Table Text */
    .table th {
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: linear-gradient(45deg, #4834D4, #686DE0);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .table td {
        color: #2D3436;
        font-weight: 500;
    }

    /* Animated Text Effects */
    @keyframes shimmer {
        0% {
            background-position: -200% center;
        }

        100% {
            background-position: 200% center;
        }
    }

    .animate-text {
        background: linear-gradient(90deg, #4834D4, #686DE0, #4834D4);
        background-size: 200% auto;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 3s linear infinite;
    }

    /* Button Text */
    .btn {
        font-weight: 600;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        background: linear-gradient(45deg, #4834D4, #686DE0);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        border: 2px solid #4834D4;
        transition: all 0.3s ease;
    }

    .btn:hover {
        background: linear-gradient(45deg, #686DE0, #4834D4);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        transform: translateY(-2px);
    }

    /* Data Card Values */
    .data-card p {
        font-size: 2rem;
        font-weight: 700;
        background: linear-gradient(45deg, #4834D4, #686DE0);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        margin: 0;
        line-height: 1.2;
    }

    /* Error Messages */
    .error-text {
        color: #EB4D4B;
        font-weight: 500;
        font-size: 0.875rem;
        background: linear-gradient(45deg, #EB4D4B, #FF7979);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Success Messages */
    .success-text {
        color: #20BF6B;
        font-weight: 500;
        font-size: 0.875rem;
        background: linear-gradient(45deg, #20BF6B, #78E08F);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Light Theme Variables */
    :root {
        --light-bg: #ffffff;
        --light-surface: #f8fafc;
        --light-card: #ffffff;
        --light-text: #1f2937;
        --light-text-secondary: #6b7280;
        --light-border: #e5e7eb;
        --light-accent: #2563eb;
        --light-hover: #f9fafb;
    }

    /* Base Light Theme */
    body {
        background-color: var(--light-bg);
        color: var(--light-text);
    }

    /* Card Styles */
    .card {
        background: var(--light-surface);
        border: 1px solid var(--light-border);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    /* Form Elements */
    .form-control {
        background: var(--light-card);
        border: 1px solid var(--light-border);
        color: var(--light-text);
    }

    .form-control:focus {
        background: var(--light-surface);
        border-color: var(--light-accent);
        box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    /* Labels */
    .form-group label {
        color: var(--light-text);
        font-weight: 500;
    }

    /* Table Styles */
    .table {
        background: var(--light-surface);
        border-color: var(--light-border);
    }

    .table th {
        background: var(--light-card);
        color: var(--light-text);
        border-bottom: 2px solid var(--light-border);
    }

    .table td {
        color: var(--light-text-secondary);
        border-bottom: 1px solid var(--light-border);
    }

    .table tr:hover {
        background: var(--light-hover);
    }

    /* Navigation */
    .sliding-nav {
        background: var(--light-surface);
        border-right: 1px solid var(--light-border);
    }

    .nav-item {
        color: var(--light-text);
    }

    .nav-item:hover {
        background: var(--light-hover);
    }

    /* Welcome Banner */
    .welcome-banner {
        background: linear-gradient(135deg, var(--light-card), var(--light-surface));
        color: var(--light-text);
    }

    .welcome-banner h1 {
        color: var(--light-text);
    }

    .welcome-banner p {
        color: var(--light-text-secondary);
    }

    /* Action Cards */
    .action-card {
        background: var(--light-surface);
        border: 1px solid var(--light-border);
    }

    .action-card:hover {
        background: var(--light-card);
    }

    .card-content h3 {
        color: var(--light-text);
    }

    .card-content p {
        color: var(--light-text-secondary);
    }

    /* Buttons */
    .btn-primary {
        background: var(--light-accent);
        color: white;
        border: none;
    }

    /* Modal Styles */
    .modal-content {
        background: var(--light-surface);
        border: 1px solid var(--light-border);
    }

    .modal-header {
        border-bottom: 1px solid var(--light-border);
    }

    /* Status Badges */
    .status-badge {
        background: var(--light-card);
        color: var(--light-text);
    }

    .status-badge.success {
        background: #10b981;
        color: white;
    }

    .status-badge.pending {
        background: #f59e0b;
        color: white;
    }

    .status-badge.error {
        background: #ef4444;
        color: white;
    }

    /* Data Cards */
    .data-card {
        background: var(--light-surface);
        border: 1px solid var(--light-border);
    }

    .data-card h3 {
        color: var(--light-text);
    }

    .data-card p {
        color: var(--light-accent);
    }

    /* Profile Section */
    .profile-header {
        background: var(--light-surface);
        color: var(--light-text);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--light-surface);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--light-accent);
        border-radius: 4px;
    }

    /* Input Fields */
    select.form-control option {
        background: var(--light-surface);
        color: var(--light-text);
    }

    /* Toast Messages */
    .toast-modern {
        background: var(--light-surface);
        color: var(--light-text);
        border: 1px solid var(--light-border);
    }

    /* Links */
    a {
        color: var(--light-accent);
    }

    a:hover {
        color: #1d4ed8;
    }

    /* Auth Toggle */
    .auth-toggle a {
        color: var(--light-accent);
    }

    /* Search Box */
    .search-box input {
        background: var(--light-card);
        color: var(--light-text);
        border: 1px solid var(--light-border);
    }

    /* Information Cards */
    .info-item {
        background: var(--light-card);
        border: 1px solid var(--light-border);
    }

    .info-label {
        color: var(--light-text-secondary);
    }

    .info-value {
        color: var(--light-text);
    }

    /* Fee Summary */
    .fee-summary {
        background: var(--light-surface);
        border: 1px solid var(--light-border);
    }

    .fee-item {
        background: var(--light-card);
        border: 1px solid var(--light-border);
    }

    /* Data Page Table Styles */
    #dataPage .table {
        background: var(--light-surface);
        border-radius: 12px;
        overflow: hidden;
        margin-top: 1.5rem;
        border-collapse: separate;
        border-spacing: 0;
        width: 100%;
    }

    #dataPage .table th {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: #ffffff;
        padding: 1.2rem 1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.95rem;
        text-align: left;
        background-clip: initial;
        -webkit-background-clip: initial;
        -webkit-text-fill-color: initial;
    }

    #dataPage .table td {
        padding: 1.2rem 1rem;
        color: var(--text-primary);
        background: var(--light-card);
        border-bottom: 1px solid var(--light-border);
        font-size: 0.95rem;
    }

    #dataPage .table tr:hover td {
        background: rgba(37, 99, 235, 0.05);
        transform: scale(1.01);
        transition: all 0.3s ease;
    }

    /* Data Stats Cards */
    #dataPage .data-card {
        background: var(--light-surface);
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
    }

    #dataPage .data-card h3 {
        color: var(--text-primary);
        font-size: 1.1rem;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    #dataPage .data-card p {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
        margin: 0;
    }

    /* Form Controls in Data Page */
    #dataPage .form-control {
        background: var(--light-card);
        border: 1px solid var(--light-border);
        color: var(--text-primary);
        padding: 0.75rem;
        border-radius: 8px;
    }

    #dataPage .form-control:focus {
        border-color: var(--light-accent);
        box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    #dataPage label {
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        display: block;
        font-weight: 500;
    }

    /* Title and Headers */
    #dataPage h2,
    #dataPage h3 {
        color: var(--text-primary);
        margin-bottom: 1.5rem;
    }

    /* Student List Title */
    #studentListTitle {
        color: var(--text-primary);
        font-size: 1.2rem;
        margin: 1rem 0;
        padding: 0.5rem 0;
        border-bottom: 2px solid var(--light-accent);
    }

    /* Currency Values */
    #dataPage .table td:nth-child(5),
    #dataPage .table td:nth-child(6),
    #dataPage .table td:nth-child(7) {
        font-family: 'Courier New', monospace;
        font-weight: 600;
        color: var(--primary-color);
    }

    /* Export Buttons */
    #dataPage .export-options {
        margin: 1.5rem 0;
        display: flex;
        gap: 1rem;
        justify-content: space-between;
        align-items: center;
    }


    /* Responsive Table */
    @media (max-width: 768px) {
        #dataPage .table {
            display: block;
            overflow-x: auto;
            white-space: nowrap;
        }

        #dataPage .table th,
        #dataPage .table td {
            padding: 1rem 0.75rem;
        }

        #dataPage .export-options {
            flex-direction: column;
            gap: 0.75rem;
        }

        #dataPage .export-options button {
            width: 100%;
        }
    }

    /* Data Page Filter Styles */
    .data-filters {
        background: var(--light-surface);
        padding: 1.5rem;
        border-radius: 12px;
        margin: 1.5rem 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .filter-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .filter-group label {
        color: var(--text-primary);
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        letter-spacing: 0.5px;
    }

    .filter-group select {
        background: var(--light-card);
        border: 1px solid var(--light-border);
        color: var(--text-primary);
        padding: 0.75rem;
        border-radius: 8px;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-group select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
        outline: none;
    }

    .filter-group select option {
        background: var(--light-surface);
        color: var(--text-primary);
        padding: 0.5rem;
    }

    .filter-actions {
        margin-top: 2rem;
        display: flex;
        justify-content: center;
        gap: 1rem;
    }

    .generate-btn {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .generate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
    }

    .generate-btn i {
        font-size: 1.1rem;
    }

    /* Information Page Input Styling */
    #searchInfoRollNumber {
        color: #000000;
        font-size: 1.1rem;
        font-weight: 500;
        background: #ffffff;
        border: 2px solid #4a90e2;
        padding: 12px 15px;
    }

    /* Information Display Styling */
    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .info-item {
        background: #ffffff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .info-label {
        display: block;
        font-size: 1rem;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 8px;
        text-transform: uppercase;
    }

    .info-value {
        font-size: 1.2rem;
        font-weight: 500;
        color: #000000;
    }

    /* Year Selector Styling */
    #yearSelect {
        color: #000000;
        background: #ffffff;
        font-size: 1.1rem;
        padding: 10px 15px;
        border: 2px solid #4a90e2;
        border-radius: 8px;
        width: 100%;
        margin-bottom: 20px;
    }

    /* Payment History Table Styling */
    .payment-history table {
        background: #ffffff;
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        border-radius: 10px;
        overflow: hidden;
    }

    .payment-history th {
        background: #4a90e2;
        color: #ffffff;
        font-weight: 600;
        padding: 15px;
        text-align: left;
    }

    .payment-history td {
        padding: 15px;
        color: #000000;
        font-weight: 500;
        border-bottom: 1px solid #e1e1e1;
    }

    /* Status Badge */
    .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .status-badge.paid {
        background: #27ae60;
        color: #ffffff;
    }

    .status-badge.pending {
        background: #f1c40f;
        color: #000000;
    }

    /* Fee Details Styling */
    .fee-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .fee-item {
        background: #ffffff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .fee-label {
        font-size: 0.9rem;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 8px;
        text-transform: uppercase;
    }

    .fee-value {
        font-size: 1.2rem;
        font-weight: 500;
        color: #000000;
    }

    /* Modern Table Styles for Information Page */
    #informationPage .table {
        width: 100%;
        background: var(--dark-surface);
        border-radius: 12px;
        overflow: hidden;
        margin-top: 1.5rem;
        border-collapse: separate;
        border-spacing: 0;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    #informationPage .table th {
        background: linear-gradient(135deg, #4834D4, #686DE0);
        color: #ffffff;
        padding: 1.2rem 1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.95rem;
        text-align: left;
        white-space: nowrap;
    }

    #informationPage .table td {
        padding: 1.2rem 1rem;
        color: #000000;
        background: #ffffff;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        font-size: 0.95rem;
        transition: all 0.3s ease;
    }

    #informationPage .table tr:hover td {
        background: rgba(99, 102, 241, 0.05);
        transform: scale(1.01);
    }

    #informationPage .table tr:last-child td {
        border-bottom: none;
    }

    /* Status Badge in Table */
    #informationPage .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        text-align: center;
        display: inline-block;
        min-width: 100px;
    }

    #informationPage .status-badge.paid {
        background: linear-gradient(135deg, #10B981, #059669);
        color: white;
    }

    #informationPage .status-badge.pending {
        background: linear-gradient(135deg, #F59E0B, #D97706);
        color: white;
    }

    /* Table Responsive Wrapper */
    #informationPage .table-responsive {
        overflow-x: auto;
        padding: 1rem;
        background: #de0909;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    /* Custom Scrollbar for Table */
    #informationPage .table-responsive::-webkit-scrollbar {
        height: 6px;
    }

    #informationPage .table-responsive::-webkit-scrollbar-track {
        background: #db0c0c;
        border-radius: 3px;
    }

    #informationPage .table-responsive::-webkit-scrollbar-thumb {
        background: #4834D4;
        border-radius: 3px;
    }

    /* Amount Columns Styling */
    #informationPage .table td:nth-child(4),
    #informationPage .table td:nth-child(5) {
        font-family: 'Courier New', monospace;
        font-weight: 600;
        color: #4834D4;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        #informationPage .table {
            font-size: 0.9rem;
        }

        #informationPage .table th,
        #informationPage .table td {
            padding: 1rem 0.75rem;
        }

        #informationPage .status-badge {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
            min-width: 90px;
        }
    }

    /* Additional Table Features */
    #informationPage .table thead {
        position: sticky;
        top: 0;
        z-index: 10;
    }

    #informationPage .table tbody tr:nth-child(even) td {
        background: rgba(248, 250, 252, 0.8);
    }

    #informationPage .table th:first-child {
        border-top-left-radius: 8px;
    }

    #informationPage .table th:last-child {
        border-top-right-radius: 8px;
    }

    /* Fee Type Breakdown */
    .fee-breakdown {
        margin-top: 2rem;
        background: #ffffff;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .fee-breakdown h4 {
        color: #000000;
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
    }

    .fee-breakdown-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        margin-bottom: 1rem;
        border: 1px solid #e1e1e1;
    }

    .fee-breakdown-item .fee-type {
        color: #000000;
        font-size: 1.1rem;
        font-weight: 700;
    }

    .fee-breakdown-item .fee-amount {
        color: #000000;
        font-size: 1.2rem;
        font-weight: 700;
    }

    body {
        background-color: #f5f5f5;
        padding: 20px;
    }

    .header {
        text-align: center;
        padding: 20px;
        background-color: #0a4275;
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .input-section {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    label {
        font-weight: 600;
        color: #333;
    }

    input,
    select {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }

    input:focus,
    select:focus {
        outline: none;
        border-color: #0a4275;
    }

    .buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }

    button {
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .generate-btn {
        background-color: #0a4275;
        color: white;
    }

    .reset-btn {
        background-color: #f44336;
        color: white;
    }

    .download-btn {
        background-color: #4caf50;
        color: white;
    }

    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .receipt-section {
        display: none;
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .receipt {
        border: 2px solid #333;
        padding: 20px;
        position: relative;
        background-color: white;
    }

    .vemu-header {
        text-align: center;
        border-bottom: 2px solid #333;
        padding-bottom: 15px;
        margin-bottom: 20px;
    }

    .vemu-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #0a4275;
        margin-bottom: 5px;
    }

    .vemu-subtitle {
        font-size: 0.9rem;
        margin-bottom: 5px;
        line-height: 1.4;
    }

    .vemu-address {
        font-size: 0.9rem;
        margin-top: 10px;
    }

    .vemu-contact {
        font-size: 0.9rem;
        margin-top: 5px;
    }

    .vemu-id {
        position: absolute;
        top: 20px;
        right: 20px;
        font-weight: bold;
    }

    .receipt-title {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin: 15px 0;
        color: #0a4275;
        text-decoration: underline;
    }

    .receipt-body {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-bottom: 20px;
    }

    .receipt-item {
        display: flex;
        margin-bottom: 10px;
    }

    .receipt-item-label {
        font-weight: 600;
        color: #333;
        width: 140px;
        flex-shrink: 0;
    }

    .receipt-item-value {
        font-weight: 600;
        color: #0a4275;
    }

    .receipt-footer {
        border-top: 2px solid #333;
        margin-top: 30px;
        padding-top: 15px;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    .receipt-amount-section {
        text-align: left;
    }

    .receipt-amount-label {
        font-weight: 600;
        font-size: 1.1rem;
    }

    .receipt-amount {
        font-size: 1.3rem;
        font-weight: 700;
        color: #0a4275;
        margin-top: 5px;
    }

    .receipt-stamp {
        text-align: center;
        margin-right: 20px;
    }

    .receipt-stamp-title {
        font-weight: 600;
        margin-bottom: 30px;
    }

    .receipt-stamp-line {
        width: 150px;
        border-top: 1px solid #333;
    }

    .quote-section {
        display: none;
        background-color: #e8f5e9;
        padding: 20px;
        border-left: 5px solid #4caf50;
        border-radius: 5px;
        margin-top: 20px;
        font-style: italic;
        text-align: center;
        font-size: 0.9rem;
    }

    .vemu-logo {
        width: 80px;
        height: 80px;
        margin-right: 15px;
    }

    .vemu-info {
        flex: 1;
        min-width: 300px;
    }

    .watermark {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        font-size: 8rem;
        color: rgba(10, 66, 117, 0.07);
        pointer-events: none;
        z-index: 0;
        white-space: nowrap;
    }

    .success-message {
        display: none;
        background-color: #4caf50;
        color: white;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
        margin-top: 10px;
        animation: fadeOut 3s forwards;
        animation-delay: 3s;
    }

    @keyframes fadeOut {
        from {
            opacity: 1;
        }

        to {
            opacity: 0;
            visibility: hidden;
        }
    }

    @media print {
        body * {
            visibility: hidden;
        }

        .receipt-section,
        .receipt-section * {
            visibility: visible;
        }

        .receipt-section {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
        }

        .buttons {
            display: none;
        }

        .receipt {
            box-shadow: none;
            border: none;
        }
    }

    @media screen and (max-width: 768px) {
        .form-grid {
            grid-template-columns: 1fr;
        }

        .receipt-body {
            grid-template-columns: 1fr;
        }
    }

    .print-btn {
        background-color: #2196F3;
        color: white;
    }

    @media print {
        body * {
            visibility: hidden;
        }

        .receipt-section,
        .receipt-section * {
            visibility: visible;
        }

        .receipt {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            box-shadow: none;
            border: none;
        }

        .buttons,
        .success-message {
            display: none !important;
        }

        /* Make sure quote shows in print */
        .quote-section {
            visibility: visible;
            display: block !important;
            margin-top: 30px;
        }
    }

    /* Sidebar */
    .sidebar {
        width: 250px;
        background: #2c3e50;
        color: white;
        position: fixed;
        top: 0;
        left: -250px;
        height: 100%;
        transition: left 0.3s ease;
        padding: 20px;
        z-index: 1000;
    }

    .sidebar.active {
        left: 0;
    }

    .profile-section {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .profile-icon {
        font-size: 30px;
        color: #1abc9c;
    }

    .nav-links {
        margin-top: 20px;
        list-style: none;
        padding: 0;
    }

    .nav-links li {
        margin: 15px 0;
    }

    .nav-links a {
        color: #ecf0f1;
        text-decoration: none;
        font-size: 16px;
    }

    /* Toggle Button */
    #toggleBtn {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 2001;
        font-size: 24px;
        padding: 8px 12px;
        background: #1abc9c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    /* Main Content */
    .main-content {
        margin-left: 0;
        padding: 40px;
        transition: margin-left 0.3s ease;
    }

    .main-content.shifted {
        margin-left: 250px;
    }

    /* Modern Fee Receipt Styles */
    #feeReceiptsPage {
        background-color: #f5f5f5;
        padding: 20px;
        min-height: 100vh;
    }

    #feeReceiptsPage .container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 30px;
    }

    #feeReceiptsPage .header {
        text-align: center;
        padding: 20px;
        background-color: #0a4275;
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    #feeReceiptsPage .input-section {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    #feeReceiptsPage .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
    }

    #feeReceiptsPage .form-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    #feeReceiptsPage label {
        font-weight: 600;
        color: #333;
    }

    #feeReceiptsPage input,
    #feeReceiptsPage select {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }

    #feeReceiptsPage input:focus,
    #feeReceiptsPage select:focus {
        outline: none;
        border-color: #0a4275;
    }

    #feeReceiptsPage .buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }

    #feeReceiptsPage button {
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    #feeReceiptsPage .generate-btn {
        background-color: #0a4275;
        color: white;
    }

    #feeReceiptsPage .reset-btn {
        background-color: #f44336;
        color: white;
    }

    #feeReceiptsPage .download-btn {
        background-color: #4caf50;
        color: white;
    }

    #feeReceiptsPage .print-btn {
        background-color: #2196F3;
        color: white;
    }

    #feeReceiptsPage button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #feeReceiptsPage .receipt-section {
        display: none;
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    #feeReceiptsPage .receipt {
        border: 2px solid #333;
        padding: 20px;
        position: relative;
        background-color: white;
    }

    #feeReceiptsPage .vemu-header {
        text-align: center;
        border-bottom: 2px solid #333;
        padding-bottom: 15px;
        margin-bottom: 20px;
    }

    #feeReceiptsPage .vemu-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #0a4275;
        margin-bottom: 5px;
    }

    #feeReceiptsPage .vemu-subtitle {
        font-size: 0.9rem;
        margin-bottom: 5px;
        line-height: 1.4;
    }

    #feeReceiptsPage .vemu-address {
        font-size: 0.9rem;
        margin-top: 10px;
    }

    #feeReceiptsPage .vemu-contact {
        font-size: 0.9rem;
        margin-top: 5px;
    }

    #feeReceiptsPage .vemu-id {
        position: absolute;
        top: 20px;
        right: 20px;
        font-weight: bold;
    }

    #feeReceiptsPage .receipt-title {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin: 15px 0;
        color: #0a4275;
        text-decoration: underline;
    }

    #feeReceiptsPage .receipt-body {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-bottom: 20px;
    }

    #feeReceiptsPage .receipt-item {
        display: flex;
        margin-bottom: 10px;
    }

    #feeReceiptsPage .receipt-item-label {
        font-weight: 600;
        color: #333;
        width: 140px;
        flex-shrink: 0;
    }

    #feeReceiptsPage .receipt-item-value {
        font-weight: 600;
        color: #0a4275;
    }

    #feeReceiptsPage .receipt-footer {
        border-top: 2px solid #333;
        margin-top: 30px;
        padding-top: 15px;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    #feeReceiptsPage .receipt-amount-section {
        text-align: left;
    }

    #feeReceiptsPage .receipt-amount-label {
        font-weight: 600;
        font-size: 1.1rem;
    }

    #feeReceiptsPage .receipt-amount {
        font-size: 1.3rem;
        font-weight: 700;
        color: #0a4275;
        margin-top: 5px;
    }

    #feeReceiptsPage .receipt-stamp {
        text-align: center;
        margin-right: 20px;
    }

    #feeReceiptsPage .receipt-stamp-title {
        font-weight: 600;
        margin-bottom: 30px;
    }

    #feeReceiptsPage .receipt-stamp-line {
        width: 150px;
        border-top: 1px solid #333;
    }

    #feeReceiptsPage .quote-section {
        display: none;
        background-color: #e8f5e9;
        padding: 20px;
        border-left: 5px solid #4caf50;
        border-radius: 5px;
        margin-top: 20px;
        font-style: italic;
        text-align: center;
        font-size: 0.9rem;
    }

    #feeReceiptsPage .vemu-logo {
        width: 80px;
        height: 80px;
        object-fit: contain;
    }

    #feeReceiptsPage .vemu-info {
        flex: 1;
        min-width: 300px;
    }

    #feeReceiptsPage .watermark {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        font-size: 8rem;
        color: rgba(10, 66, 117, 0.07);
        pointer-events: none;
        z-index: 0;
        white-space: nowrap;
    }

    #feeReceiptsPage .success-message {
        display: none;
        background-color: #4caf50;
        color: white;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
        margin-top: 10px;
        animation: fadeOut 3s forwards;
        animation-delay: 3s;
    }

    @media print {
        #feeReceiptsPage body * {
            visibility: hidden;
        }

        #feeReceiptsPage .receipt-section,
        #feeReceiptsPage .receipt-section * {
            visibility: visible;
        }

        #feeReceiptsPage .receipt-section {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
        }

        #feeReceiptsPage .buttons {
            display: none;
        }

        #feeReceiptsPage .receipt {
            box-shadow: none;
            border: none;
        }
    }

    @media screen and (max-width: 768px) {
        #feeReceiptsPage .form-grid {
            grid-template-columns: 1fr;
        }

        #feeReceiptsPage .receipt-body {
            grid-template-columns: 1fr;
        }
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <!-- Main Application -->
    <div id="mainApp">
        <!-- Sliding Menu -->
        <div class="sidebar" id="slidingNav">
            <div class="nav-profile">
                <div class="profile-info">
                    <i class="fas fa-user-circle profile-icon"></i>
                    <span id="userDisplayName">Welcome</span>
                </div>
                <button id="toggleBtn" onclick="toggleNav()">☰</button>
            </div>
            <nav class="nav-links">
                <a href="#" onclick="showPage('home')" class="nav-item">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="#" onclick="showPage('data')" class="nav-item">
                    <i class="fas fa-database"></i> Data
                </a>
                <a href="#" onclick="showPage('information')" class="nav-item">
                    <i class="fas fa-info-circle"></i> Information
                </a>
                <a href="#" onclick="showPage('complaints')" class="nav-item">
                    <i class="fas fa-comment-alt"></i> Complaints
                </a>
                <a href="#" onclick="showPage('feeReceipts')" class="nav-item">
                    <i class="fas fa-file-invoice"></i> Fee Receipts
                </a>
                <a href="#" onclick="showPage('announcements')" class="nav-item">
                    <i class="fas fa-bullhorn"></i> Announcements
                </a>
                <a href="#" onclick="showPage('profile')" class="nav-item">
                    <i class="fas fa-user"></i> Profile
                </a>

                <a href="#" onclick="logout()" class="nav-item">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>

            </nav>
        </div>

        <!-- Content Wrapper -->
        <div class="content-wrapper" id="contentWrapper">
            <!-- Home Page -->
            <div id="homePage" class="container hidden">
                <!-- Welcome Section -->
                <div class="welcome-banner">
                    <i class="fas fa-university banner-icon"></i>
                    <h1>Student Management System</h1>
                    <p>Welcome to the comprehensive student fee management portal</p>
                </div>

                <!-- Quick Actions Grid -->
                <div class="quick-actions-grid">
                    <!-- Student Details Card -->
                    <div class="action-card student-card">
                        <div class="card-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="card-content">
                            <h3>Student Details Entry 📝</h3>
                            <p>Register new students and manage existing records</p>
                            <button onclick="showPage('studentEntry')" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Register
                            </button>
                        </div>
                    </div>

                    <!-- Fee Updates Card -->
                    <div class="action-card fee-card">
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="card-content">
                            <h3>Fee Updates 💰</h3>
                            <p>Update and track student fee payments</p>
                            <button onclick="showPage('feeUpdate')" class="btn btn-primary">
                                <i class="fas fa-edit"></i> Update Fee
                            </button>
                        </div>
                    </div>

                    <!-- Online Fee Verification Card -->
                    <div class="action-card fee-card">
                        <div class="card-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="card-content">
                            <h3>Online Fee Verification 🔍</h3>
                            <p>Verify and process online fee payments</p>
                            <button onclick="showPage('feeVerification')" class="btn btn-primary">
                                <i class="fas fa-arrow-right"></i> Enter
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student Entry Page -->
            <div id="studentEntryPage" class="container hidden">
                <div class="card">
                    <h2>Enter Student Details</h2>
                    <form id="studentForm" onsubmit="submitStudentDetails(event)">
                        <div class="form-group">
                            <label for="studentName">Student Name</label>
                            <input type="text" id="studentName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="rollNumber">Roll Number</label>
                            <input type="text" id="rollNumber" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" class="form-control" required>
                                <option value="">Select Gender</option>
                                <option>Male</option>
                                <option>Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="category">Category</label>
                            <select id="category" class="form-control" required>
                                <option value="">Select Category</option>
                                <option>Management</option>
                                <option>Convener</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="academicYear">Academic Year</label>
                            <select id="academicYear" class="form-control" required>
                                <option value="">Select Year</option>
                                <option>1st Year</option>
                                <option>2nd Year</option>
                                <option>3rd Year</option>
                                <option>4th Year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="branch">Branch</label>
                            <select id="branch" class="form-control" required>
                                <option value="">Select Branch</option>
                                <option>Computer Science</option>
                                <option>Electronics Engineering</option>
                                <option>Electrical Engineering</option>
                                <option>Mechanical Engineering</option>
                                <option>Civil Engineering</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="feeType">Fee Type</label>
                            <select id="feeType" class="form-control" required>
                                <option value="">Select Fee Type</option>
                                <option>Tuition Fee</option>
                                <option>Hostel Fee</option>
                                <option>Bus Fee</option>
                                <option>University Fee</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="billNumber">Bill Number</label>
                            <input type="text" id="billNumber" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="totalAmount">Total Amount</label>
                            <input type="number" id="totalAmount" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="paidAmount">Paid Amount</label>
                            <input type="number" id="paidAmount" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Register student Details</button>
                        <button type="button" onclick="showPage('home')" class="btn btn-secondary">Back to Home</button>
                    </form>

                    <!-- Student Information Display -->
                    <div id="studentInfoDisplay" class="hidden" style="margin-top: 20px;">
                        <h3>Recently Added Student Information</h3>
                        <table class="table">
                            <tbody id="studentInfoTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Fee Update Page -->
            <div id="feeUpdatePage" class="container hidden">
                <div class="card">
                    <h2>Update Fee Details</h2>
                    <form onsubmit="updateFeeDetails(event)">
                        <div class="form-group">
                            <label for="updateRollNumber">Roll Number</label>
                            <input type="text" id="updateRollNumber" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="updateAcademicYear">Academic Year</label>
                            <select id="updateAcademicYear" class="form-control" required>
                                <option value="">Select Academic Year</option>
                                <option>1st Year</option>
                                <option>2nd Year</option>
                                <option>3rd Year</option>
                                <option>4th Year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="updateFeeType">Fee Type</label>
                            <select id="updateFeeType" class="form-control" required>
                                <option value="">Select Fee Type</option>
                                <option>Tuition Fee</option>
                                <option>Hostel Fee</option>
                                <option>Bus Fee</option>
                                <option>University Fee</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="updatePaidAmount">Paid Amount</label>
                            <input type="number" id="updatePaidAmount" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="updateBillNumber">Bill Number</label>
                            <input type="text" id="updateBillNumber" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Update Fee</button>
                        <button type="button" onclick="showPage('home')" class="btn btn-secondary">Back to Home</button>
                    </form>

                    <!-- Fee Update Information Display -->
                    <div id="feeUpdateInfoDisplay" class="hidden" style="margin-top: 20px;">
                        <h3>Recent Fee Update Information</h3>
                        <table class="table">
                            <tbody id="feeUpdateInfoTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Add new Fee Verification Page -->
            <div id="feeVerificationPage" class="container hidden page">
                <div class="card">
                    <h2>Online Fee Verification</h2>
                    <div id="pendingTransactions">
                        <h3>Pending Transactions</h3>
                        <div class="transaction-list" id="pendingTransactionsList">
                            <!-- Transactions will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add verification modal -->
            <div class="modal" id="verificationModal">
                <div class="modal-content">
                    <h3>Verification Result</h3>
                    <div class="form-group">
                        <label for="verificationComment">Reason (Required for rejection)</label>
                        <textarea id="verificationComment" class="form-control"></textarea>
                    </div>
                    <div class="form-group">
                        <button onclick="processVerification('verify')" class="btn btn-success">Verify</button>
                        <button onclick="processVerification('reject')" class="btn btn-danger">Reject</button>
                        <button onclick="closeVerificationModal()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="dataPage" class="container hidden">
                <div class="card">
                    <h2>Student Data Management</h2>

                    <!-- Stats Cards -->
                    <div class="data-stats">
                        <div class="data-card">
                            <h3>Total Students</h3>
                            <p id="totalStudentsCount">0</p>
                        </div>
                        <div class="data-card">
                            <h3>Paid Fee</h3>
                            <p id="paidFeeStudentsCount">0</p>
                        </div>
                        <div class="data-card">
                            <h3>Pending Fee</h3>
                            <p id="pendingFeeStudentsCount">0</p>
                        </div>
                    </div>

                    <!-- Filter Section -->
                    <div class="data-filters">
                        <div class="filter-grid">
                            <div class="filter-group">
                                <label for="studentListType">
                                    <i class="fas fa-filter"></i> List Type
                                </label>
                                <select id="studentListType" class="form-control">
                                    <option value="">Select List Type</option>
                                    <option value="all">All Students</option>
                                    <option value="paidFee">Paid Fee Students</option>
                                    <option value="pendingFee">Pending Fee Students</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label for="listBranch">
                                    <i class="fas fa-code-branch"></i> Branch
                                </label>
                                <select id="listBranch" class="form-control">
                                    <option value="">All Branch</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Electronics Engineering">Electronics Engineering</option>
                                    <option value="Mechanical Engineering">Mechanical Engineering</option>
                                    <option value="Civil Engineering">Civil Engineering</option>
                                    <option value="Electrical Engineering">Electrical Engineering</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label for="listAcademicYear">
                                    <i class="fas fa-calendar-alt"></i> Academic Year
                                </label>
                                <select id="listAcademicYear" class="form-control">
                                    <option value="">All Years</option>
                                    <option value="1st Year">1st Year</option>
                                    <option value="2nd Year">2nd Year</option>
                                    <option value="3rd Year">3rd Year</option>
                                    <option value="4th Year">4th Year</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label for="listCategory">
                                    <i class="fas fa-tag"></i> Category
                                </label>
                                <select id="listCategory" class="form-control">
                                    <option value="">Select Category</option>
                                    <option value="Management">Management</option>
                                    <option value="Convener">Convener</option>
                                </select>
                            </div>
                        </div>

                        <div class="filter-actions">
                            <button onclick="generateStudentList()" class="generate-btn">
                                <i class="fas fa-sync-alt"></i>
                                Generate List
                            </button>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="export-options">
                        <button onclick="downloadExcel('csv')" class="btn btn-success">
                            <i class="fas fa-file-csv"></i> Export CSV
                        </button>
                        <button onclick="downloadExcel('xlsx')" class="btn btn-success">
                            <i class="fas fa-file-excel"></i> Export Excel
                        </button>
                        <button onclick="downloadExcel('pdf')" class="btn btn-success">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                    </div>

                    <!-- Results Table -->
                    <div id="studentListDisplay" class="hidden">
                        <h3 id="studentListTitle"></h3>
                        <table id="studentListTable" class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Roll Number</th>
                                    <th>Branch</th>
                                    <th>Year</th>
                                    <th>Category</th>
                                    <th>Total Amount</th>
                                    <th>Paid Amount</th>
                                    <th>Pending Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Information Page -->
            <div id="informationPage" class="container hidden">
                <div class="card">
                    <h2><i class="fas fa-info-circle"></i> Student Information</h2>
                    <div id="studentInformationSearch">
                        <div class="form-group">
                            <label for="searchInfoRollNumber">Search by Roll Number</label>
                            <div class="search-box">
                                <input type="text" id="searchInfoRollNumber" class="form-control"
                                    placeholder="Enter Roll Number">
                                <button onclick="searchStudentInformation()" class="btn btn-primary">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </div>

                        <div id="studentInfoResults" class="hidden">
                            <!-- Basic Student Information -->
                            <div class="student-basic-info">
                                <h3><i class="fas fa-user-graduate"></i> Student Details</h3>
                                <div id="studentBasicInfo"></div>
                            </div>

                            <!-- Year-wise Fee Details -->
                            <div class="year-wise-section">
                                <h3><i class="fas fa-calendar-alt"></i> Year-wise Details</h3>
                                <div class="year-selector">
                                    <select id="yearSelect" class="form-control" onchange="updateYearDetails()">
                                        <option value="">Select Year</option>
                                    </select>
                                </div>

                                <div id="yearDetails">
                                    <!-- Fee Summary -->
                                    <div class="fee-summary">
                                        <h4><i class="fas fa-money-bill-wave"></i> Fee Details</h4>
                                        <div id="feeInfo"></div>
                                    </div>

                                    <!-- Payment History -->
                                    <div class="payment-history">
                                        <h4><i class="fas fa-history"></i> Payment History</h4>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Bill Number</th>
                                                        <th>Amount</th>
                                                        <th>Fee Type</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="paymentHistoryTable"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profilePage" class="container hidden">
                <div class="modern-profile-container">
                    <div class="profile-header glass-effect">
                        <div class="profile-avatar-wrapper">
                            <div class="profile-avatar">
                                <i class="fas fa-user-circle fa-4x"></i>
                            </div>
                            <div class="profile-info">
                                <h3 id="profileDisplayName">Loading...</h3>
                                <span class="profile-badge">Employee</span>
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <i class="fas fa-calendar-check"></i>
                                <span>Last Login</span>
                                <p id="lastLoginDate">Today</p>
                            </div>
                        </div>
                    </div>

                    <div class="profile-content-scroll">
                        <div class="profile-form-container">
                            <form id="profileForm" onsubmit="updateProfile(event)" class="modern-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="profileUsername" class="form-label">
                                            <i class="fas fa-user"></i>
                                            <span>Username</span>
                                        </label>
                                        <div class="input-wrapper">
                                            <input type="text" id="profileUsername" class="modern-input" required
                                                aria-label="Username">
                                            <span class="input-focus-effect"></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="profileEmail" class="form-label">
                                            <i class="fas fa-envelope"></i>
                                            <span>Email Address</span>
                                        </label>
                                        <div class="input-wrapper">
                                            <input type="email" id="profileEmail" class="modern-input" required
                                                aria-label="Email Address">
                                            <span class="input-focus-effect"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="password-section glass-effect">
                                    <h4 class="section-title">
                                        <i class="fas fa-lock"></i>
                                        Security Settings
                                    </h4>

                                    <div class="form-actions" style="margin-top: 0;">
                                        <button type="button" id="startPasswordChangeBtn" class="btn-modern primary">
                                            <i class="fas fa-key"></i>
                                            Enter Password
                                        </button>
                                    </div>

                                    <div id="passwordCodeSection" class="password-grid" style="display: none; margin-top: 1rem;">
                                        <div class="form-group">
                                            <label for="passwordCodeInput" class="form-label">Enter Number</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="passwordCodeInput" class="modern-input" aria-label="Enter Number" placeholder="Enter 999">
                                            </div>
                                        </div>
                                        <div class="form-actions">
                                            <button type="button" id="submitPasswordCodeBtn" class="btn-modern primary">
                                                <i class="fas fa-check"></i>
                                                Verify Code
                                            </button>
                                            <button type="button" id="cancelPasswordCodeBtn" class="btn-modern secondary">
                                                <i class="fas fa-times"></i>
                                                Cancel
                                            </button>
                                        </div>
                                    </div>

                                    <div id="newPasswordSection" class="password-grid" style="display: none; margin-top: 1rem;">
                                        <div class="form-group">
                                            <label for="newPassword" class="form-label">New Password</label>
                                            <div class="input-wrapper">
                                                <input type="password" id="newPassword" class="modern-input" aria-label="New Password">
                                                <button type="button" class="password-toggle" aria-label="Toggle password visibility">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="confirmNewPassword" class="form-label">Confirm Password</label>
                                            <div class="input-wrapper">
                                                <input type="password" id="confirmNewPassword" class="modern-input" aria-label="Confirm New Password">
                                            </div>
                                        </div>
                                        <div class="form-actions">
                                            <button type="button" id="saveNewPasswordBtn" class="btn-modern primary">
                                                <i class="fas fa-save"></i>
                                                Save Password
                                            </button>
                                            <button type="button" id="cancelNewPasswordBtn" class="btn-modern secondary">
                                                <i class="fas fa-times"></i>
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn-modern primary">
                                        <i class="fas fa-save"></i>
                                        Save Changes
                                    </button>
                                    <button type="reset" class="btn-modern secondary">
                                        <i class="fas fa-undo"></i>
                                        Reset
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- feeReceipt page -->
            <div id="feeReceiptsPage" class="container hidden">
                <div class="header">
                    <h1>VEMU Institute Receipt System</h1>
                    <p>Enter student details to generate receipt</p>
                </div>

                <div class="input-section">
                    <form id="receipt-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name">Name of Student</label>
                                <input type="text" id="name" name="name" required>
                            </div>

                            <div class="form-group">
                                <label for="receiptNo">Receipt No</label>
                                <input type="text" id="receiptNo" name="receiptNo" required>
                            </div>

                            <div class="form-group">
                                <label for="rollNo">Roll No</label>
                                <input type="text" id="rollNo" name="rollNo" required>
                            </div>

                            <div class="form-group">
                                <label for="year">Year</label>
                                <select id="year" name="year" required>
                                    <option value="">Select Year</option>
                                    <option value="1st Year">1st Year</option>
                                    <option value="2nd Year">2nd Year</option>
                                    <option value="3rd Year">3rd Year</option>
                                    <option value="4th Year">4th Year</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="receiptBranch">Branch</label>
                                <select id="receiptBranch" name="branch" required>
                                    <option value="">Select Branch</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Electronics Engineering">Electronics Engineering</option>
                                    <option value="Electrical Engineering">Electrical Engineering</option>
                                    <option value="Mechanical Engineering">Mechanical Engineering</option>
                                    <option value="Civil Engineering">Civil Engineering</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="date">Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="transactionId">Transaction ID</label>
                                <input type="text" id="transactionId" name="transactionId" required>
                            </div>
                            <div class="form-group">
                                <label for="utrNumber">UTR/UPI Number</label>
                                <input type="text" id="utrNumber" name="utrNumber" required>
                            </div>

                            <div class="form-group">
                                <label for="amount">Paid Amount</label>
                                <input type="number" id="amount" name="amount" required>
                            </div>

                            <div class="form-group">
                                <label for="receiptFeeType">Fee Type</label>
                                <select id="receiptFeeType" name="feeType" required>
                                    <option value="">Select Fee Type</option>
                                    <option value="Tuition Fee">Tuition Fee</option>
                                    <option value="Examination Fee">Examination Fee</option>
                                    <option value="Hostel Fee">Hostel Fee</option>
                                    <option value="Library Fee">Library Fee</option>
                                    <option value="Transport Fee">Transport Fee</option>
                                    <option value="Miscellaneous Fee">Miscellaneous Fee</option>
                                </select>
                            </div>
                        </div>

                        <div class="buttons">
                            <button type="button" class="generate-btn" id="generate-btn">Generate Receipt</button>
                            <button type="reset" class="reset-btn">Reset</button>
                        </div>
                    </form>
                </div>

                <div class="receipt-section" id="receipt-section">
                    <div class="receipt" id="receipt">
                        <div class="watermark">PAID</div>
                        <div class="vemu-header">
                            <img src="/static/images/logo/logo3.png" alt="VEMU Logo" class="vemu-logo">
                            <div class="vemu-title">VEMU INSTITUTE OF TECHNOLOGY</div>
                            <div class="vemu-subtitle">Approved by AICTE, New Delhi & Affiliated to JNTUA, Anantapuram,
                                An
                                ISO
                                9001: 2015 Certified Institute</div>
                            <div class="vemu-subtitle">AUTONOMOUS | Accredited by NBA | NAAC A+ | Recognised Under
                                Sections
                                2
                                (F) and 12 (B) UGC Act 1956 TIRUPATHI</div>
                            <div class="vemu-address">TO CHITTOOR HIGHWAY, P.Kothakota, Chittoor Dt, A.P. – 517112</div>
                            <div class="vemu-contact">E-mail: vemupat@gmail.com, Mobile: 888 666 1148/8886661149 / 888
                                666
                                1150
                            </div>
                        </div>

                        <div class="receipt-title">FEE RECEIPT</div>

                        <div class="receipt-body">
                            <div class="receipt-item">
                                <span class="receipt-item-label">Name of Student:</span>
                                <span class="receipt-item-value" id="receipt-name"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Receipt No:</span>
                                <span class="receipt-item-value" id="receipt-no"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Roll No:</span>
                                <span class="receipt-item-value" id="receipt-roll"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Year:</span>
                                <span class="receipt-item-value" id="receipt-year"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Branch:</span>
                                <span class="receipt-item-value" id="receipt-branch"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Date:</span>
                                <span class="receipt-item-value" id="receipt-date"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Transaction ID:</span>
                                <span class="receipt-item-value" id="receipt-transaction-id"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">UTR/UPI Number:</span>
                                <span class="receipt-item-value" id="receipt-utr-number"></span>
                            </div>

                            <div class="receipt-item">
                                <span class="receipt-item-label">Fee Type:</span>
                                <span class="receipt-item-value" id="receipt-fee-type"></span>
                            </div>
                        </div>

                        <div class="receipt-footer">
                            <div class="receipt-amount-section">
                                <div class="receipt-amount-label">Amount Paid:</div>
                                <div class="receipt-amount">₹ <span id="receipt-amount"></span>/-</div>
                            </div>

                            <div class="receipt-stamp">
                                <div class="receipt-stamp-title">For VEMU INSTITUTE OF TECHNOLOGY</div>
                                <div class="receipt-stamp-line"></div>
                                <div class="receipt-stamp-signature">Authorized Signatory</div>
                            </div>
                        </div>
                    </div>

                    <div class="quote-section" id="quote-section">
                        <p>"Education is not the learning of facts, but the training of the mind to think." - Albert
                            Einstein
                        </p>
                    </div>

                    <div class="success-message" id="success-message"></div>

                    <div class="buttons">
                        <button type="button" class="download-btn" id="download-btn">Download PDF</button>
                        <button type="button" class="download-btn" id="download-img-btn"
                            style="background-color: #ff9800;">Download Image</button>
                        <button type="button" class="print-btn" id="print-btn"
                            style="background-color: #2196F3;">Print Receipt</button>
                    </div>
                </div>
            </div>

            <!-- Add new Complaints Page -->
            <div id="complaintsPage" class="container hidden">
                <div class="modern-complaints-container">
                    <div class="complaints-header glass-effect">
                        <div class="header-content">
                            <h2><i class="fas fa-comment-alt"></i> Complaints Dashboard</h2>
                            <div class="complaints-stats">
                                <div class="stat-badge pending">
                                    <i class="fas fa-clock"></i>
                                    <span id="pendingCount">0 Pending</span>
                                </div>
                                <div class="stat-badge resolved">
                                    <i class="fas fa-check-circle"></i>
                                    <span id="resolvedCount">0 Resolved</span>
                                </div>
                            </div>
                        </div>
                        <div class="filter-section">
                            <div class="search-wrapper">
                                <i class="fas fa-search"></i>
                                <input type="text" id="complaintSearch" class="modern-input"
                                    placeholder="Search complaints..." aria-label="Search complaints">
                            </div>
                            <select id="complaintStatusFilter" class="modern-select"
                                onchange="filterComplaints(this.value)" aria-label="Filter by status">
                                <option value="all">All Complaints</option>
                                <option value="pending">Pending</option>
                                <option value="resolved">Resolved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                    </div>

                    <div class="complaints-content-scroll">
                        <div id="complaintsList" class="complaints-grid">
                            <!-- Complaints will be loaded here dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Announcements Management Page (Employee) -->
            <div id="announcementsPage" class="container hidden">
                <div class="card">
                    <h2><i class="fas fa-bullhorn"></i> Announcements</h2>
                    <div class="form-group">
                        <label for="announcementText">Announcement Text</label>
                        <textarea id="announcementText" class="form-control" rows="3" placeholder="Enter announcement message..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="announcementDays">Duration (days)</label>
                        <input type="number" id="announcementDays" min="1" class="form-control" placeholder="e.g. 3">
                    </div>
                    <div class="form-actions" style="display:flex;gap:10px;">
                        <button type="button" class="btn btn-primary" onclick="publishAnnouncement()">
                            <i class="fas fa-paper-plane"></i> Publish
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="clearAnnouncementForm()">
                            <i class="fas fa-undo"></i> Clear
                        </button>
                    </div>

                    <div style="margin-top: 2rem;">
                        <h3><i class="fas fa-list"></i> Active/Upcoming Announcements</h3>
                        <div id="announcementsList" class="table-responsive">
                            <!-- Announcements will render here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Background Elements -->
    <div class="background">
        <div class="gradient-bg"></div>
        <div class="overlay"></div>
        <div class="bubbles" id="bubbles"></div>
    </div>



    <script>
        // Global Variables
        let currentUser = {
            username: localStorage.getItem('employeeUsername') || 'Employee',
            email: localStorage.getItem('employeeEmail') || 'vemuit@gmail.com',
            isLoggedIn: true
        };
        let studentDatabase = [];

        // Add CSS animations for toasts
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        function toggleNav() {
            const nav = document.getElementById('slidingNav');
            const content = document.getElementById('contentWrapper');
            const toggleBtn = document.getElementById('toggleBtn');

            nav.classList.toggle('active');
            content.classList.toggle('shifted');

            // Optionally change the icon/text on toggle button
            if (nav.classList.contains('active')) {
                toggleBtn.innerHTML = '×'; // Close icon
            } else {
                toggleBtn.innerHTML = '☰'; // Open icon
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/employloginpage';
            }
        }

        // Page Navigation
        function showPage(pageId) {
            const pages = ['home', 'data', 'information', 'profile', 'studentEntry', 'feeUpdate', 'feeVerification', 'complaints', 'feeReceipts','announcements'];
            pages.forEach(page => {
                const pageElement = document.getElementById(`${page}Page`);
                if (pageElement) {
                    pageElement.classList.add('hidden');
                }
            });

            const selectedPage = document.getElementById(`${pageId}Page`);
            if (selectedPage) {
                selectedPage.classList.remove('hidden');
            }

            // Close menu on mobile
            if (window.innerWidth <= 768) {
                toggleNav();
            }

            // Special handling for profile page
            if (pageId === 'profile') {
                const profileUsername = document.getElementById('profileUsername');
                const profileEmail = document.getElementById('profileEmail');
                const profileDisplayName = document.getElementById('profileDisplayName');
                
                if (profileUsername) profileUsername.value = currentUser.username;
                if (profileEmail) profileEmail.value = currentUser.email;
                if (profileDisplayName) profileDisplayName.textContent = currentUser.username;
                
                // Initialize password change flow
                setTimeout(initPasswordChangeFlow, 100);
            }

            if (pageId === 'data') {
                updateDataStats();
            }

            // Special handling for home page - remove complaints card
            if (pageId === 'home') {
                const homePage = document.getElementById('homePage');
                homePage.innerHTML = `
                    <div class="welcome-banner">
                        <i class="fas fa-university banner-icon"></i>
                        <h1>Student Management System</h1>
                        <p>Welcome to the comprehensive student fee management portal</p>
                    </div>

                    <div class="quick-actions-grid">
                        <!-- Student Details Card -->
                        <div class="action-card student-card">
                            <div class="card-icon">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="card-content">
                                <h3>Student Details Entry 📝</h3>
                                <p>Register new students and manage existing records</p>
                                <button onclick="showPage('studentEntry')" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Enter Details
                                </button>
                            </div>
                        </div>

                        <!-- Fee Updates Card -->
                        <div class="action-card fee-card">
                            <div class="card-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="card-content">
                                <h3>Fee Updates 💰</h3>
                                <p>Update and track student fee payments</p>
                                <button onclick="showPage('feeUpdate')" class="btn btn-primary">
                                    <i class="fas fa-edit"></i> Update Fee
                                </button>
                            </div>
                        </div>

                        <!-- Online Fee Verification Card -->
                        <div class="action-card fee-card">
                            <div class="card-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="card-content">
                                <h3>Online Fee Verification 🔍</h3>
                                <p>Verify and process online fee payments</p>
                                <button onclick="showPage('feeVerification')" class="btn btn-primary">
                                    <i class="fas fa-arrow-right"></i> Enter
                                </button>
                            </div>
                        </div>`;
            }

            // Load complaints only when on complaints page
            if (pageId === 'complaints') {
                loadComplaints();
            }

            // Load announcements list when opening announcements page
            if (pageId === 'announcements') {
                renderAnnouncements();
            }
        }

        // Student Details and Fee Management
        function submitStudentDetails(event) {
            event.preventDefault();

            const studentData = {
                name: document.getElementById('studentName').value,
                rollNumber: document.getElementById('rollNumber').value,
                gender: document.getElementById('gender').value,
                category: document.getElementById('category').value,
                academicYear: document.getElementById('academicYear').value,
                branch: document.getElementById('branch').value,
                feeType: document.getElementById('feeType').value,
                billNumber: document.getElementById('billNumber').value,
                totalAmount: parseFloat(document.getElementById('totalAmount').value),
                paidAmount: parseFloat(document.getElementById('paidAmount').value),
                pendingAmount: parseFloat(document.getElementById('totalAmount').value) -
                    parseFloat(document.getElementById('paidAmount').value),
                payments: [{
                    billNumber: document.getElementById('billNumber').value,
                    amount: parseFloat(document.getElementById('paidAmount').value),
                    date: new Date().toISOString(),
                    feeType: document.getElementById('feeType').value, // Store fee type in payment
                    academicYear: document.getElementById('academicYear').value
                }]
            };
            // Validate fee type
            if (!studentData.feeType) {
                alert('Please select a fee type');
                return;
            }


            const existingStudentIndex = studentDatabase.findIndex(
                s => s.rollNumber === studentData.rollNumber &&
                    s.academicYear === studentData.academicYear
            );

            if (existingStudentIndex >= 0) {
                studentDatabase[existingStudentIndex] = studentData;
            } else {
                studentDatabase.push(studentData);
            }
            // Save to localStorage for student login compatibility
            localStorage.setItem('studentDatabase', JSON.stringify(studentDatabase));

            alert('Student details saved successfully!');
            event.target.reset();
            closeModal('studentEntryModal');
            updateDataStats();

            // Display the submitted information
            const studentInfoDisplay = document.getElementById('studentInfoDisplay');
            const studentInfoTable = document.getElementById('studentInfoTable');

            studentInfoTable.innerHTML = `
                <tr><th>Name:</th><td>${studentData.name}</td></tr>
                <tr><th>Roll Number:</th><td>${studentData.rollNumber}</td></tr>
                <tr><th>Gender:</th><td>${studentData.gender}</td></tr>
                <tr><th>Category:</th><td>${studentData.category}</td></tr>
                <tr><th>Academic Year:</th><td>${studentData.academicYear}</td></tr>
                <tr><th>Branch:</th><td>${studentData.branch}</td></tr>
                <tr><th>Fee Type:</th><td>${studentData.feeType}</td></tr>
                <tr><th>Bill Number:</th><td>${studentData.billNumber}</td></tr>
                <tr><th>Total Amount:</th><td>₹${studentData.totalAmount.toFixed(2)}</td></tr>
                <tr><th>Paid Amount:</th><td>₹${studentData.paidAmount.toFixed(2)}</td></tr>
                <tr><th>Pending Amount:</th><td>₹${studentData.pendingAmount.toFixed(2)}</td></tr>
            `;

            studentInfoDisplay.classList.remove('hidden');

            // Show success message
            alert('Student details saved successfully!');

            // Reset the form
            event.target.reset();
        }

        function updateFeeDetails(event) {
            event.preventDefault();

            const feeData = {
                rollNumber: document.getElementById('updateRollNumber').value,
                academicYear: document.getElementById('updateAcademicYear').value,
                feeType: document.getElementById('updateFeeType').value,
                paidAmount: parseFloat(document.getElementById('updatePaidAmount').value),
                billNumber: document.getElementById('updateBillNumber').value
            };

            const studentIndex = studentDatabase.findIndex(
                s => s.rollNumber === feeData.rollNumber && s.academicYear === feeData.academicYear
            );

            if (studentIndex >= 0) {
                const student = studentDatabase[studentIndex];
                student.paidAmount += feeData.paidAmount;
                student.pendingAmount = student.totalAmount - student.paidAmount;

                student.payments.push({
                    billNumber: feeData.billNumber,
                    amount: feeData.paidAmount,
                    date: new Date().toISOString(),
                    feeType: feeData.feeType,
                    academicYear: feeData.academicYear
                });

                studentDatabase[studentIndex] = student;
                // Persist updates so studentlogin.html can read them
                localStorage.setItem('studentDatabase', JSON.stringify(studentDatabase));
                alert('Fee details updated successfully!');
                event.target.reset();
                closeModal('feeUpdateModal');
                updateDataStats();

                // Display the updated information
                const feeUpdateInfoDisplay = document.getElementById('feeUpdateInfoDisplay');
                const feeUpdateInfoTable = document.getElementById('feeUpdateInfoTable');

                feeUpdateInfoTable.innerHTML = `
                    <tr><th>Roll Number:</th><td>${feeData.rollNumber}</td></tr>
                    <tr><th>Academic Year:</th><td>${feeData.academicYear}</td></tr>
                    <tr><th>Fee Type:</th><td>${feeData.feeType}</td></tr>
                    <tr><th>Paid Amount:</th><td>₹${feeData.paidAmount}</td></tr>
                    <tr><th>Bill Number:</th><td>${feeData.billNumber}</td></tr>
                `;

                feeUpdateInfoDisplay.classList.remove('hidden');
            } else {
                alert('Student not found for the specified academic year!');
            }
        }

        // Modify the searchStudentInformation function
        function searchStudentInformation() {
            const rollNumber = document.getElementById('searchInfoRollNumber').value.trim();
            const resultsDiv = document.getElementById('studentInfoResults');
            const yearSelect = document.getElementById('yearSelect');

            if (!rollNumber) {
                alert('Please enter a roll number');
                return;
            }

            try {
                // Find all entries for the student
                const studentEntries = studentDatabase.filter(s => s.rollNumber === rollNumber);

                if (studentEntries.length === 0) {
                    alert('No student found with this roll number');
                    resultsDiv.classList.add('hidden');
                    return;
                }

                // Get the latest entry for basic info
                const latestEntry = studentEntries[studentEntries.length - 1];

                // Display basic information
                document.getElementById('studentBasicInfo').innerHTML = `
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Name</span>
                            <span class="info-value">${latestEntry.name || 'N/A'}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Roll Number</span>
                            <span class="info-value">${latestEntry.rollNumber || 'N/A'}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Branch</span>
                            <span class="info-value">${latestEntry.branch || 'N/A'}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Category</span>
                            <span class="info-value">${latestEntry.category || 'N/A'}</span>
                        </div>
                    </div>
                `;

                // Populate year selector with unique years
                const years = [...new Set(studentEntries.map(entry => entry.academicYear))];
                yearSelect.innerHTML = `
                    <option value="">Select Year</option>
                    ${years.map(year => `<option value="${year}">${year}</option>`).join('')}
                `;

                // Show results and select first year by default
                resultsDiv.classList.remove('hidden');
                if (years.length > 0) {
                    yearSelect.value = years[0];
                    updateYearDetails();
                }

            } catch (error) {
                console.error('Error:', error);
                alert('Error while fetching student details. Please try again.');
            }
        }

        // Update the updateYearDetails function
        function updateYearDetails() {
            const rollNumber = document.getElementById('searchInfoRollNumber').value.trim();
            const selectedYear = document.getElementById('yearSelect').value;

            if (!rollNumber || !selectedYear) return;

            try {
                // Find the student data
                const student = studentDatabase.find(s =>
                    s.rollNumber === rollNumber && s.academicYear === selectedYear
                );

                if (!student) {
                    document.getElementById('yearDetails').innerHTML = '<p>No details available for selected year</p>';
                    return;
                }

                // Get all verified transactions for this student and year
                const transactions = JSON.parse(localStorage.getItem('studentTransactions') || '[]');
                const verifiedTransactions = transactions.filter(t =>
                    t.status === 'verified' &&
                    t.rollNumber === rollNumber &&
                    t.academicYear === selectedYear
                );

                // Calculate total paid amount - only include verified transactions, exclude regular payments that have been verified
                const verifiedPaymentsTotal = verifiedTransactions.reduce((sum, t) =>
                    sum + parseFloat(t.paidAmount), 0);

                // Get regular payments that are NOT already verified (to avoid duplicates)
                const regularPayments = student.payments || [];
                const verifiedKeys = new Set(
                    verifiedTransactions.map(t => `${t.billNumber}|${t.transactionId}|${t.paidAmount}|${t.feeType}`)
                );
                
                const nonVerifiedPayments = regularPayments.filter(payment => {
                    const paymentKey = `${payment.billNumber || ''}|${payment.transactionId || ''}|${payment.amount}|${payment.feeType}`;
                    return !verifiedKeys.has(paymentKey);
                });

                const regularPaymentsTotal = nonVerifiedPayments.reduce((sum, p) => sum + parseFloat(p.amount), 0);
                const totalPaidAmount = regularPaymentsTotal + verifiedPaymentsTotal;
                const pendingAmount = student.totalAmount - totalPaidAmount;

                // Update fee information
                document.getElementById('yearDetails').innerHTML = `
                    <div class="fee-summary">
                        <h4><i class="fas fa-money-bill-wave"></i> Fee Details</h4>
                        <div class="fee-details">
                            <div class="fee-item">
                                <span class="info-label">Total Fee</span>
                                <span class="info-value">₹${(student.totalAmount || 0).toFixed(2)}</span>
                            </div>
                            <div class="fee-item">
                                <span class="info-label">Paid Amount</span>
                                <span class="info-value">₹${totalPaidAmount.toFixed(2)}</span>
                            </div>
                            <div class="fee-item">
                                <span class="info-label">Pending Amount</span>
                                <span class="info-value">₹${Math.max(0, pendingAmount).toFixed(2)}</span>
                            </div>
                        </div>
                    </div>

                    <div class="payment-history-section">
                        <h4><i class="fas fa-history"></i> Payment History</h4>
                        <div class="table-responsive">
                            <table class="table" id="paymentHistoryTable">
                                <thead>
                                    <tr>
                                        <td>Date</td>
                                        <td>Bill Number</td>
                                        <td>Transaction ID</td>
                                        <td>Amount</td>
                                        <td>Fee Type</td>
                                        <td>Status</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${nonVerifiedPayments.map(payment => `
                                        <tr>
                                            <td>${new Date(payment.date).toLocaleDateString()}</td>
                                            <td>${payment.billNumber || '-'}</td>
                                            <td>${payment.transactionId || '-'}</td>
                                            <td>₹${parseFloat(payment.amount).toFixed(2)}</td>
                                            <td>${payment.feeType}</td>
                                            <td>
                                                <span class="status-badge paid">
                                                    <i class="fas fa-check-circle"></i> Paid
                                                </span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                    ${verifiedTransactions.map(trans => `
                                        <tr>
                                            <td>${new Date(trans.transDate).toLocaleDateString()}</td>
                                            <td>${trans.billNumber}</td>
                                            <td>${trans.transactionId}</td>
                                            <td>₹${parseFloat(trans.paidAmount).toFixed(2)}</td>
                                            <td>${trans.feeType}</td>
                                            <td>
                                                <span class="status-badge verified">
                                                    <i class="fas fa-check-circle"></i> Verified
                                                </span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                                <tfoot>
                                    <tr class="total-row">
                                        <td colspan="3"><strong>Total Paid Amount</strong></td>
                                        <td colspan="3"><strong>₹${totalPaidAmount.toFixed(2)}</strong></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>

                    <div class="fee-breakdown">
                        <h4><i class="fas fa-file-invoice-dollar"></i> Fee Breakdown</h4>
                        <div class="fee-type-details">
                            ${getFeeTypeBreakdown(nonVerifiedPayments, verifiedTransactions)}
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error('Error:', error);
                alert('Error while updating year details. Please try again.');
            }
        }

        // Helper function to get fee type breakdown
        function getFeeTypeBreakdown(regularPayments = [], verifiedPayments = []) {
            const feeTypes = {};

            // Combine regular and verified payments
            [...(regularPayments || []), ...verifiedPayments].forEach(payment => {
                const type = payment.feeType;
                const amount = parseFloat(payment.amount || payment.paidAmount);

                feeTypes[type] = (feeTypes[type] || 0) + amount;
            });

            return Object.entries(feeTypes).map(([type, amount]) => `
                <div class="fee-breakdown-item">
                    <span class="fee-type">${type}</span>
                    <span class="fee-amount">₹${amount.toFixed(2)}</span>
                </div>
            `).join('');
        }

        // Add Enter key support
        document.getElementById('searchInfoRollNumber').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                searchStudentInformation();
            }
        });

        // Add input validation
        document.getElementById('searchInfoRollNumber').addEventListener('input', function (event) {
            const input = event.target;
            const value = input.value.trim();

            // Remove any non-alphanumeric characters
            input.value = value.replace(/[^a-zA-Z0-9]/g, '');
        });

        // Add receipt functions
        function viewReceipt(billNumber) {
            // Implement receipt view logic
            alert(`Viewing receipt for bill number: ${billNumber}`);
        }

        function downloadReceipt(billNumber) {
            // Implement receipt download logic
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Find payment details
            const payment = findPaymentByBillNumber(billNumber);
            if (!payment) return;

            // Add receipt content
            doc.setFontSize(16);
            doc.text("Payment Receipt", 20, 20);

            doc.setFontSize(12);
            doc.text(`Bill Number: ${billNumber}`, 20, 40);
            doc.text(`Date: ${new Date(payment.date).toLocaleDateString()}`, 20, 50);
            doc.text(`Amount: ₹${payment.amount.toFixed(2)}`, 20, 60);
            doc.text(`Fee Type: ${payment.feeType}`, 20, 70);

            doc.save(`receipt_${billNumber}.pdf`);
        }

        function findPaymentByBillNumber(billNumber) {
            for (const student of studentDatabase) {
                const payment = student.payments.find(p => p.billNumber === billNumber);
                if (payment) return payment;
            }
            return null;
        }

        // Data and Export Functions
        function generateStudentList() {
            const listType = document.getElementById('studentListType').value;
            const branch = document.getElementById('listBranch').value;
            const academicYear = document.getElementById('listAcademicYear').value;
            const category = document.getElementById('listCategory').value;

            // Validate at least one filter is selected
            if (!listType && !branch && !academicYear && !category) {
                alert('Please select at least one filter criteria');
                return;
            }

            let filteredStudents = [...studentDatabase];

            // Apply filters
            if (listType) {
                filteredStudents = filteredStudents.filter(student => {
                    if (listType === 'paidFee') {
                        return student.pendingAmount <= 0;
                    } else if (listType === 'pendingFee') {
                        return student.pendingAmount > 0;
                    }
                    return true; // for 'all' option
                });
            }

            if (branch) {
                filteredStudents = filteredStudents.filter(student =>
                    student.branch.toLowerCase() === branch.toLowerCase()
                );
            }

            if (academicYear) {
                filteredStudents = filteredStudents.filter(student =>
                    student.academicYear === academicYear
                );
            }

            if (category) {
                filteredStudents = filteredStudents.filter(student =>
                    student.category.toLowerCase() === category.toLowerCase()
                );
            }

            // Display results
            const tableBody = document.querySelector('#studentListTable tbody');
            const listTitle = document.getElementById('studentListTitle');

            if (filteredStudents.length === 0) {
                listTitle.textContent = 'No students found matching the criteria';
                tableBody.innerHTML = `
            <tr>
                <td colspan="9" class="text-center">No results found</td>
            </tr>`;
                return;
            }

            listTitle.textContent = `Found ${filteredStudents.length} student(s)`;

            // Generate table rows
            tableBody.innerHTML = filteredStudents.map(student => `
        <tr>
            <td>${student.name || '-'}</td>
            <td>${student.rollNumber || '-'}</td>
            <td>${student.branch || '-'}</td>
            <td>${student.academicYear || '-'}</td>
            <td>${student.category || '-'}</td>
            <td>₹${(student.totalAmount || 0).toFixed(2)}</td>
            <td>₹${(student.paidAmount || 0).toFixed(2)}</td>
            <td>₹${(student.pendingAmount || 0).toFixed(2)}</td>
            <td>
                <span class="status-badge ${student.pendingAmount <= 0 ? 'success' : 'pending'}">
                    ${student.pendingAmount <= 0 ? 'Paid' : 'Pending'}
                </span>
            </td>
        </tr>
    `).join('');

            // Show the results table
            document.getElementById('studentListDisplay').classList.remove('hidden');
        }

        // Add event listeners to filters for automatic updates
        document.querySelectorAll('.filter-group select').forEach(select => {
            select.addEventListener('change', generateStudentList);
        });

        function downloadExcel(format) {
            const listType = document.getElementById('studentListType').value;
            const branch = document.getElementById('listBranch').value;
            const category = document.getElementById('listCategory').value;
            const academicYear = document.getElementById('listAcademicYear').value;

            let filteredStudents = studentDatabase.filter(student => {
                let matchesType = true;
                let matchesBranch = true;
                let matchesCategory = true;
                let matchesYear = true;

                if (listType === 'paidFee') {
                    matchesType = student.pendingAmount === 0;
                } else if (listType === 'pendingFee') {
                    matchesType = student.pendingAmount > 0;
                }

                if (branch) matchesBranch = student.branch === branch;
                if (category) matchesCategory = student.category === category;
                if (academicYear) matchesYear = student.academicYear === academicYear;

                return matchesType && matchesBranch && matchesCategory && matchesYear;
            });

            if (filteredStudents.length === 0) {
                alert('No students found matching the selected criteria.');
                return;
            }

            const headers = ['Name', 'Roll Number', 'Branch', 'Academic Year', 'Total Amount', 'Paid Amount', 'Pending Amount'];
            const data = filteredStudents.map(student => [
                student.name,
                student.rollNumber,
                student.branch,
                student.academicYear,
                student.totalAmount,
                student.paidAmount,
                student.pendingAmount
            ]);

            if (format === 'csv') {
                let csvContent = "data:text/csv;charset=utf-8,";
                csvContent += headers.join(',') + '\n';
                data.forEach(row => {
                    csvContent += row.join(',') + '\n';
                });

                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "student_data.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            else if (format === 'xlsx') {
                const ws = XLSX.utils.aoa_to_sheet([headers, ...data]);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, "Students");
                XLSX.writeFile(wb, "student_data.xlsx");
            }
            else if (format === 'pdf') {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                doc.autoTable({
                    head: [headers],
                    body: data,
                    startY: 20,
                    margin: { top: 20 },
                    styles: { fontSize: 8 },
                    headStyles: { fillColor: [66, 139, 202] }
                });

                // Add title
                doc.setFontSize(16);
                doc.text("Student Data Report", 14, 15);

                // Add timestamp
                doc.setFontSize(8);
                doc.text(`Generated on: ${new Date().toLocaleString()}`, 14, doc.lastAutoTable.finalY + 10);

                doc.save("student_data.pdf");
            }
        }
        function showSuccessMessage(message) {
            const toast = document.createElement('div');
            toast.className = 'toast-message success';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
        function updateDataStats() {
            const totalStudents = studentDatabase.length;
            const paidFeeStudents = studentDatabase.filter(s => s.pendingAmount === 0).length;
            const pendingFeeStudents = studentDatabase.filter(s => s.pendingAmount > 0).length;

            document.getElementById('totalStudentsCount').textContent = totalStudents;
            document.getElementById('paidFeeStudentsCount').textContent = paidFeeStudents;
            document.getElementById('pendingFeeStudentsCount').textContent = pendingFeeStudents;
        }

        function updateProfile(event) {
            event.preventDefault();

            const usernameInput = document.getElementById('profileUsername');
            const emailInput = document.getElementById('profileEmail');
            
            if (!usernameInput || !emailInput) {
                showError('Profile form elements not found');
                return;
            }

            const username = usernameInput.value.trim();
            const email = emailInput.value.trim();

            // Validation
            if (!username || !email) {
                showError('Username and email are required');
                return;
            }

            try {
                // Persist username/email for display and login page
                currentUser.username = username;
                currentUser.email = email;
                localStorage.setItem('employeeUsername', username);
                localStorage.setItem('employeeEmail', email);

                // Update UI safely
                const userDisplayName = document.getElementById('userDisplayName');
                const profileDisplayName = document.getElementById('profileDisplayName');
                
                if (userDisplayName) userDisplayName.textContent = `Welcome, ${username}`;
                if (profileDisplayName) profileDisplayName.textContent = username;

                showSuccess('Profile updated successfully');
            } catch (error) {
                showError('Failed to update profile: ' + error.message);
            }
        }

        // Password change flow handlers
        function initPasswordChangeFlow() {
            const startBtn = document.getElementById('startPasswordChangeBtn');
            const codeSection = document.getElementById('passwordCodeSection');
            const submitCodeBtn = document.getElementById('submitPasswordCodeBtn');
            const cancelCodeBtn = document.getElementById('cancelPasswordCodeBtn');
            const newPwdSection = document.getElementById('newPasswordSection');
            const saveNewPwdBtn = document.getElementById('saveNewPasswordBtn');
            const cancelNewPwdBtn = document.getElementById('cancelNewPasswordBtn');

            if (!startBtn) return;

            startBtn.addEventListener('click', function () {
                codeSection.style.display = 'grid';
                newPwdSection.style.display = 'none';
                document.getElementById('passwordCodeInput').value = '';
            });

            submitCodeBtn.addEventListener('click', function () {
                const codeVal = (document.getElementById('passwordCodeInput').value || '').trim();
                if (codeVal !== '999') {
                    showError('Invalid number. Please enter 999.');
                    return;
                }
                codeSection.style.display = 'none';
                newPwdSection.style.display = 'grid';
            });

            cancelCodeBtn.addEventListener('click', function () {
                codeSection.style.display = 'none';
            });

            cancelNewPwdBtn.addEventListener('click', function () {
                newPwdSection.style.display = 'none';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmNewPassword').value = '';
            });

            saveNewPwdBtn.addEventListener('click', function () {
                const newPwd = (document.getElementById('newPassword').value || '').trim();
                const confirmPwd = (document.getElementById('confirmNewPassword').value || '').trim();

                if (!newPwd || !confirmPwd) {
                    showError('Please enter new password and confirm it.');
                    return;
                }
                if (newPwd.length < 8) {
                    showError('Password must be at least 8 characters long.');
                    return;
                }
                if (newPwd !== confirmPwd) {
                    showError('New passwords do not match.');
                    return;
                }

                try {
                    localStorage.setItem('employeePassword', newPwd);
                    showSuccess('Password updated successfully');
                    newPwdSection.style.display = 'none';
                    document.getElementById('newPassword').value = '';
                    document.getElementById('confirmNewPassword').value = '';
                } catch (e) {
                    showError('Failed to save new password.');
                }
            });
        }

        function showSuccess(message) {
            // Create a simple success toast
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 10000;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        function showError(message) {
            // Create a simple error toast
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #f44336;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 10000;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Add these new functions for fee verification
        function loadPendingTransactions() {
            // Get transactions from localStorage
            const transactions = JSON.parse(localStorage.getItem('studentTransactions') || '[]')
                .filter(t => t.status === 'pending');

            const container = document.getElementById('pendingTransactionsList');

            if (transactions.length === 0) {
                container.innerHTML = '<p class="text-center">No pending transactions</p>';
                return;
            }

            container.innerHTML = transactions.map(t => `
                <div class="transaction-card">
                    <div class="transaction-header">
                        <h4>Transaction ID: ${t.transactionId}</h4>
                        <span class="transaction-date">${new Date(t.transDate).toLocaleDateString()}</span>
                    </div>
                    <div class="transaction-details">
                        <div class="detail-group">
                            <span class="detail-label">Student Name:</span>
                            <span class="detail-value">${t.studentName}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Roll Number:</span>
                            <span class="detail-value">${t.rollNumber}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Amount:</span>
                            <span class="detail-value">₹${t.paidAmount}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Fee Type:</span>
                            <span class="detail-value">${t.feeType}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">UTR Number:</span>
                            <span class="detail-value">${t.utrNumber}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Academic Year:</span>
                            <span class="detail-value">${t.academicYear}</span>
                        </div>
                    </div>
                    <div class="transaction-actions">
                        <button onclick="openVerificationModal('${t.transactionId}')" class="btn btn-primary">
                            Review
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function openVerificationModal(transactionId) {
            currentTransactionId = transactionId;
            const modal = document.getElementById('verificationModal');
            modal.style.display = 'flex';
            document.getElementById('verificationComment').value = '';
        }

        function closeVerificationModal() {
            const modal = document.getElementById('verificationModal');
            modal.style.display = 'none';
            currentTransactionId = null;
            document.getElementById('verificationComment').value = '';
        }

        function processVerification(action) {
            const comment = document.getElementById('verificationComment').value;
            if (action === 'reject' && !comment) {
                alert('Please provide a reason for rejection');
                return;
            }

            try {
                // Get current transaction
                const transactions = JSON.parse(localStorage.getItem('studentTransactions') || '[]');
                const index = transactions.findIndex(t => t.transactionId === currentTransactionId);

                if (index === -1) {
                    throw new Error('Transaction not found');
                }

                const transaction = transactions[index];

                // Update transaction status
                transaction.status = action === 'verify' ? 'verified' : 'rejected';
                transaction.verificationDate = new Date().toISOString();
                transaction.verificationComment = comment;

                if (action === 'verify') {
                    // Generate bill number
                    transaction.billNumber = generateBillNumber();

                    // Update student's payment record
                    let studentDB = JSON.parse(localStorage.getItem('studentDatabase') || '[]');
                    const studentIndex = studentDB.findIndex(s => s.rollNumber === transaction.rollNumber);

                    if (studentIndex !== -1) {
                        const student = studentDB[studentIndex];

                        // Initialize payments array if not exists
                        if (!student.payments) {
                            student.payments = [];
                        }

                        // Add payment record
                        student.payments.push({
                            transactionId: transaction.transactionId,
                            billNumber: transaction.billNumber,
                            amount: transaction.paidAmount,
                            date: transaction.transDate,
                            feeType: transaction.feeType,
                            academicYear: transaction.academicYear,
                            status: 'verified'
                        });

                        // Update total paid amount
                        student.paidAmount = (student.paidAmount || 0) + transaction.paidAmount;
                        student.pendingAmount = student.totalAmount - student.paidAmount;

                        // Update student in database
                        studentDB[studentIndex] = student;
                        localStorage.setItem('studentDatabase', JSON.stringify(studentDB));
                    }
                }

                // Update transaction in storage
                transactions[index] = transaction;
                localStorage.setItem('studentTransactions', JSON.stringify(transactions));

                // Show success message
                showSuccessMessage(`Transaction ${action === 'verify' ? 'verified' : 'rejected'} successfully`);

                // Close modal and refresh list
                closeVerificationModal();
                loadPendingTransactions();

            } catch (error) {
                alert('Error processing verification: ' + error.message);
            }
        }

        function generateBillNumber() {
            return 'BILL' + Date.now() + Math.random().toString(36).substr(2, 5).toUpperCase();
        }
        // Initialize application
        function initApp() {
            // Set default user
            document.getElementById('userDisplayName').textContent = `Welcome, ${currentUser.username}`;
            document.getElementById('profileUsername').value = currentUser.username;
            document.getElementById('profileEmail').value = currentUser.email;

            // Load existing students from localStorage so data persists across pages
            try {
                studentDatabase = JSON.parse(localStorage.getItem('studentDatabase') || '[]');
            } catch (e) {
                studentDatabase = [];
            }

            // Show main app directly
            document.getElementById('mainApp').classList.remove('hidden');

            // Show home page by default
            showPage('home');

            // Show sliding menu
            toggleNav();
        }

        // Run initialization when page loads
        document.addEventListener('DOMContentLoaded', initApp);

        // Add these new functions in your script section
        function loadComplaints() {
            const complaints = JSON.parse(localStorage.getItem('studentComplaints') || '[]');
            const statusFilter = document.getElementById('complaintStatusFilter').value;
            const searchQuery = document.getElementById('complaintSearch').value.toLowerCase();

            let filteredComplaints = complaints;

            // Apply status filter
            if (statusFilter !== 'all') {
                filteredComplaints = filteredComplaints.filter(c => c.status === statusFilter);
            }

            // Apply search filter
            if (searchQuery) {
                filteredComplaints = filteredComplaints.filter(c =>
                    c.subject.toLowerCase().includes(searchQuery) ||
                    c.description.toLowerCase().includes(searchQuery) ||
                    c.studentName.toLowerCase().includes(searchQuery)
                );
            }

            // Update stats
            updateComplaintStats(complaints);

            // Render complaints
            renderComplaints(filteredComplaints);
        }

        // Update complaint statistics
        function updateComplaintStats(complaints) {
            const pendingCount = complaints.filter(c => c.status === 'pending').length;
            const resolvedCount = complaints.filter(c => c.status === 'resolved').length;

            document.getElementById('pendingCount').textContent = `${pendingCount} Pending`;
            document.getElementById('resolvedCount').textContent = `${resolvedCount} Resolved`;
        }

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', () => {
            initializeResponsiveLayout();

            // Add search functionality
            const searchInput = document.getElementById('complaintSearch');
            searchInput.addEventListener('input', debounce(loadComplaints, 300));

            // Initialize password toggles
            document.querySelectorAll('.password-toggle').forEach(button => {
                button.addEventListener('click', togglePasswordVisibility);
            });
        });

        // Debounce function for search
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Toggle password visibility
        function togglePasswordVisibility(e) {
            const button = e.currentTarget;
            const input = button.previousElementSibling;
            const type = input.type === 'password' ? 'text' : 'password';
            input.type = type;
            button.querySelector('i').className = `fas fa-eye${type === 'password' ? '' : '-slash'}`;
        }

        function resolveComplaint(complaintId, status) {
            const response = document.getElementById(`response_${complaintId}`).value;
            if (!response) {
                alert('Please provide a response before resolving the complaint.');
                return;
            }

            let complaints = JSON.parse(localStorage.getItem('studentComplaints') || '[]');
            const complaintIndex = complaints.findIndex(c => c.id === complaintId);

            if (complaintIndex !== -1) {
                complaints[complaintIndex].status = status;
                complaints[complaintIndex].response = response;
                complaints[complaintIndex].resolvedAt = new Date().toISOString();

                localStorage.setItem('studentComplaints', JSON.stringify(complaints));
                loadComplaints();
            }
        }

        function filterComplaints(status) {
            loadComplaints();
        }

        // Modify the showPage function to include complaints loading
        const originalShowPage = showPage;
        showPage = function (pageId) {
            originalShowPage(pageId);
            if (pageId === 'complaints') {
                loadComplaints();
            }
        };

        // Add this to your existing JavaScript
        function initializePages() {
            // Set container heights
            const containers = document.querySelectorAll('.profile-container, .complaints-container');
            containers.forEach(container => {
                container.style.height = `${window.innerHeight - 64}px`; // 64px for padding/margins
            });
        }

        // Call on page load and window resize
        window.addEventListener('load', initializePages);
        window.addEventListener('resize', initializePages);

        // Add these functions to your existing JavaScript
        function initializeResponsiveLayout() {
            const updateLayout = () => {
                const containers = document.querySelectorAll('.modern-profile-container, .modern-complaints-container');
                const windowHeight = window.innerHeight;
                containers.forEach(container => {
                    container.style.maxHeight = `${windowHeight - 32}px`;
                });
            };

            window.addEventListener('resize', updateLayout);
            updateLayout();
        }

        // Enhanced complaints loading function
        function loadComplaints() {
            const complaints = JSON.parse(localStorage.getItem('studentComplaints') || '[]');
            const statusFilter = document.getElementById('complaintStatusFilter').value;
            const complaintsDiv = document.getElementById('complaintsList');

            const filteredComplaints = statusFilter === 'all' ?
                complaints :
                complaints.filter(c => c.status === statusFilter);

            if (filteredComplaints.length === 0) {
                complaintsDiv.innerHTML = `
                    <div class="empty-state glass-effect">
                        <i class="fas fa-inbox fa-3x"></i>
                        <p>No complaints found</p>
                    </div>`;
                return;
            }

            complaintsDiv.innerHTML = filteredComplaints.map(complaint => `
                <div class="complaint-card glass-effect">
                    <div class="complaint-header">
                        <div class="complaint-title">
                            <h3>${complaint.subject}</h3>
                            <div class="student-info">
                                <i class="fas fa-user-graduate"></i>
                                <span>${complaint.studentName} (${complaint.rollNumber})</span>
                            </div>
                        </div>
                        <span class="status-badge ${complaint.status}">
                            <i class="fas fa-${complaint.status === 'pending' ? 'clock' :
                    complaint.status === 'resolved' ? 'check-circle' : 'times-circle'}"></i>
                            ${complaint.status}
                        </span>
                    </div>
                    
                    <div class="complaint-body">
                        <p class="complaint-text">${complaint.description}</p>
                        <p class="complaint-date">
                            <i class="far fa-calendar-alt"></i>
                            Submitted on: ${new Date(complaint.timestamp).toLocaleString()}
                        </p>
                    </div>
                    
                    ${complaint.status === 'pending' ? `
                        <div class="complaint-actions">
                            <div class="form-group">
                                <label><i class="fas fa-reply"></i> Response</label>
                                <textarea id="response_${complaint.id}" class="form-control" 
                                    placeholder="Enter your response here..." rows="3"></textarea>
                            </div>
                            <div class="action-buttons">
                                <button onclick="resolveComplaint('${complaint.id}', 'resolved')" 
                                    class="btn btn-success">
                                    <i class="fas fa-check"></i> Resolve
                                </button>
                                <button onclick="resolveComplaint('${complaint.id}', 'rejected')" 
                                    class="btn btn-danger">
                                    <i class="fas fa-times"></i> Reject
                                </button>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${complaint.response ? `
                        <div class="complaint-response">
                            <h4><i class="fas fa-comment-alt"></i> Response</h4>
                            <p>${complaint.response}</p>
                            <small>Responded on: ${new Date(complaint.resolvedAt).toLocaleString()}</small>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Initialize layout when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeResponsiveLayout);

        // Add this function to update the information page
        function updateInformationPage(rollNumber) {
            const studentDB = JSON.parse(localStorage.getItem('studentDatabase') || '[]');
            const student = studentDB.find(s => s.rollNumber === rollNumber);

            if (!student) {
                alert('Student not found');
                return;
            }

            // Update basic information
            document.getElementById('basicInfo').innerHTML = `
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Name</span>
                        <span class="info-value">${student.name}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Roll Number</span>
                        <span class="info-value">${student.rollNumber}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Branch</span>
                        <span class="info-value">${student.branch}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Total Amount</span>
                        <span class="info-value">₹${student.totalAmount.toFixed(2)}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Paid Amount</span>
                        <span class="info-value">₹${student.paidAmount.toFixed(2)}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Pending Amount</span>
                        <span class="info-value">₹${student.pendingAmount.toFixed(2)}</span>
                    </div>
                </div>
            `;

            // Update payment history
            if (student.payments && student.payments.length > 0) {
                const paymentsByYear = {};

                // Group payments by academic year
                student.payments.forEach(payment => {
                    if (!paymentsByYear[payment.academicYear]) {
                        paymentsByYear[payment.academicYear] = [];
                    }
                    paymentsByYear[payment.academicYear].push(payment);
                });

                // Update year selector
                const yearSelect = document.getElementById('yearSelect');
                yearSelect.innerHTML = `
                    <option value="">Select Year</option>
                    ${Object.keys(paymentsByYear).map(year =>
                    `<option value="${year}">${year}</option>`
                ).join('')}
                `;

                // Show payment history for first year
                if (Object.keys(paymentsByYear).length > 0) {
                    const firstYear = Object.keys(paymentsByYear)[0];
                    yearSelect.value = firstYear;
                    showPaymentHistory(paymentsByYear[firstYear]);
                }
            } else {
                document.getElementById('paymentHistoryTable').innerHTML = `
                    <tr><td colspan="5">No payment history available</td></tr>
                `;
            }
        }

        function showPaymentHistory(payments) {
            const table = document.getElementById('paymentHistoryTable');
            table.innerHTML = payments
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .map(payment => `
                    <tr>
                        <td>${new Date(payment.date).toLocaleDateString()}</td>
                        <td>${payment.transactionId}</td>
                        <td>₹${parseFloat(payment.amount).toFixed(2)}</td>
                        <td>${payment.feeType}</td>
                        <td>
                            <span class="status-badge ${payment.status}">
                                ${payment.status.charAt(0).toUpperCase() + payment.status.slice(1)}
                            </span>
                        </td>
                    </tr>
                `).join('');
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR'
            }).format(amount);
        }

        // Replace the existing fee verification functions with these updated ones

        let currentTransactionId = null;

        // Load pending transactions
        async function loadPendingTransactions() {
            try {
                // Get transactions from localStorage
                const transactions = JSON.parse(localStorage.getItem('studentTransactions') || '[]');
                const pendingTransactions = transactions.filter(t => t.status === 'pending');
                displayPendingTransactions(pendingTransactions);
            } catch (error) {
                console.error('Error loading transactions:', error);
                alert('Failed to load pending transactions. Please try again.');
            }
        }

        // Display pending transactions
        function displayPendingTransactions(transactions) {
            const container = document.getElementById('pendingTransactionsList');

            if (!transactions || transactions.length === 0) {
                container.innerHTML = `
                    <div class="text-center">
                        <p>No pending transactions to verify</p>
                    </div>`;
                return;
            }

            container.innerHTML = transactions.map(t => `
                <div class="transaction-card">
                    <div class="transaction-header">
                        <h4>Transaction ID: ${t.transactionId}</h4>
                        <span class="status-badge pending">PENDING</span>
                    </div>
                    <div class="transaction-details">
                        <div class="detail-group">
                            <span class="detail-label">Student Name</span>
                            <span class="detail-value">${t.studentName}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Roll Number</span>
                            <span class="detail-value">${t.rollNumber}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Academic Year</span>
                            <span class="detail-value">${t.academicYear}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Amount</span>
                            <span class="detail-value">₹${parseFloat(t.paidAmount).toFixed(2)}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">UTR Number</span>
                            <span class="detail-value">${t.utrNumber}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Date</span>
                            <span class="detail-value">${new Date(t.transDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                    <div class="transaction-actions">
                        <button onclick="openVerificationModal('${t.transactionId}')" class="btn btn-primary">
                            <i class="fas fa-search"></i> Check
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Process verification
        async function processVerification(action) {
            try {
                const comment = document.getElementById('verificationComment').value;
                if (action === 'reject' && !comment.trim()) {
                    alert('Please provide a reason for rejection');
                    return;
                }

                const transactions = JSON.parse(localStorage.getItem('studentTransactions') || '[]');
                const transactionIndex = transactions.findIndex(t => t.transactionId === currentTransactionId);

                if (transactionIndex === -1) {
                    throw new Error('Transaction not found');
                }

                const transaction = transactions[transactionIndex];
                const billNumber = action === 'verify' ? generateBillNumber() : null;

                // Update transaction
                const updatedTransaction = {
                    ...transaction,
                    status: action === 'verify' ? 'verified' : 'rejected',
                    billNumber: billNumber,
                    rejectionReason: action === 'reject' ? comment : null,
                    verifiedAt: new Date().toISOString()
                };

                transactions[transactionIndex] = updatedTransaction;

                // If verifying, update student's payment record
                if (action === 'verify') {
                    let studentDB = JSON.parse(localStorage.getItem('studentDatabase') || '[]');
                    const studentIndex = studentDB.findIndex(s => s.rollNumber === transaction.rollNumber);

                    if (studentIndex !== -1) {
                        const student = studentDB[studentIndex];

                        // Initialize payments array if not exists
                        if (!student.payments) {
                            student.payments = [];
                        }

                        // Add payment record
                        student.payments.push({
                            transactionId: transaction.transactionId,
                            billNumber: billNumber,
                            amount: transaction.paidAmount,
                            date: transaction.transDate,
                            feeType: transaction.feeType,
                            academicYear: transaction.academicYear,
                            status: 'verified'
                        });

                        // Update total paid amount
                        student.paidAmount = (student.paidAmount || 0) + parseFloat(transaction.paidAmount);
                        student.pendingAmount = student.totalAmount - student.paidAmount;

                        // Update student in database
                        studentDB[studentIndex] = student;
                        localStorage.setItem('studentDatabase', JSON.stringify(studentDB));
                    }
                }

                // Save to localStorage
                localStorage.setItem('studentTransactions', JSON.stringify(transactions));

                // Show success message
                showSuccessMessage(`Transaction ${action === 'verify' ? 'verified' : 'rejected'} successfully`);

                // Close modal and reload transactions
                closeVerificationModal();
                loadPendingTransactions();

            } catch (error) {
                console.error('Verification error:', error);
                alert(error.message || 'Failed to process verification');
            }
        }

        // Modal functions
        function openVerificationModal(transactionId) {
            currentTransactionId = transactionId;
            document.getElementById('verificationModal').classList.add('show');
            document.getElementById('verificationComment').value = '';
        }

        function closeVerificationModal() {
            document.getElementById('verificationModal').classList.remove('show');
            document.getElementById('verificationComment').value = '';
            currentTransactionId = null;
        }

        // Helper functions
        function generateBillNumber() {
            return 'BILL' + Math.random().toString(36).substr(2, 9).toUpperCase();
        }

        function showSuccessMessage(message) {
            const toast = document.createElement('div');
            toast.className = 'toast-modern';
            toast.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('feeVerificationPage')) {
                loadPendingTransactions();
            }
        });

        // Announcements (shared via localStorage)
        function getAnnouncements() {
            try { return JSON.parse(localStorage.getItem('portalAnnouncements') || '[]'); } catch { return []; }
        }

        function saveAnnouncements(items) {
            localStorage.setItem('portalAnnouncements', JSON.stringify(items));
        }

        function publishAnnouncement() {
            const textEl = document.getElementById('announcementText');
            const daysEl = document.getElementById('announcementDays');
            const text = (textEl?.value || '').trim();
            const days = parseInt(daysEl?.value || '0', 10);
            if (!text) { showError('Please enter announcement text'); return; }
            if (!days || days < 1) { showError('Please enter duration in days (>=1)'); return; }

            const now = new Date();
            const expiresAt = new Date(now.getTime() + days * 24 * 60 * 60 * 1000).toISOString();
            const item = {
                id: 'ANN' + Date.now() + Math.random().toString(36).slice(2, 7),
                text,
                createdAt: now.toISOString(),
                expiresAt,
                days
            };
            const list = getAnnouncements();
            list.unshift(item);
            saveAnnouncements(list);
            showSuccess('Announcement published');
            clearAnnouncementForm();
            renderAnnouncements();
        }

        function clearAnnouncementForm() {
            const textEl = document.getElementById('announcementText');
            const daysEl = document.getElementById('announcementDays');
            if (textEl) textEl.value = '';
            if (daysEl) daysEl.value = '';
        }

        function deleteAnnouncement(id) {
            const list = getAnnouncements().filter(a => a.id !== id);
            saveAnnouncements(list);
            renderAnnouncements();
        }

        function renderAnnouncements() {
            const container = document.getElementById('announcementsList');
            if (!container) return;
            const now = new Date();
            const list = getAnnouncements();
            if (!list.length) {
                container.innerHTML = '<p class="text-center">No announcements yet</p>';
                return;
            }
            const rows = list.map(a => {
                const remainingMs = new Date(a.expiresAt) - now;
                const remainingDays = Math.max(0, Math.ceil(remainingMs / (24*60*60*1000)));
                const expired = remainingMs <= 0;
                return `
                    <div class="transaction-card">
                        <div class="transaction-header">
                            <h4>${expired ? 'Expired' : 'Active'} Announcement</h4>
                            <div>
                                <button class="btn btn-danger" style="padding:0.5rem 1rem;" onclick="deleteAnnouncement('${a.id}')">Delete</button>
                            </div>
                        </div>
                        <div class="transaction-details">
                            <div class="detail-group"><span class="detail-label">Text</span><span class="detail-value">${a.text}</span></div>
                            <div class="detail-group"><span class="detail-label">Created</span><span class="detail-value">${new Date(a.createdAt).toLocaleString()}</span></div>
                            <div class="detail-group"><span class="detail-label">Expires</span><span class="detail-value">${new Date(a.expiresAt).toLocaleString()}</span></div>
                            <div class="detail-group"><span class="detail-label">Days</span><span class="detail-value">${a.days}</span></div>
                            <div class="detail-group"><span class="detail-label">Remaining</span><span class="detail-value">${expired ? 'Expired' : remainingDays + ' day(s)'}</span></div>
                        </div>
                    </div>`;
            }).join('');
            container.innerHTML = rows;
        }
        // Create bubbles
        function createBubbles() {
            const bubblesContainer = document.getElementById('bubbles');
            const bubbleCount = 15;

            for (let i = 0; i < bubbleCount; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble');

                // Random size between 50px and 200px
                const size = Math.random() * 150 + 50;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;

                // Random position
                bubble.style.left = `${Math.random() * 100}%`;
                bubble.style.top = `${Math.random() * 100}%`;

                // Random animation delay
                bubble.style.animationDelay = `${Math.random() * 8}s`;

                bubblesContainer.appendChild(bubble);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            createBubbles();
        });
        document.addEventListener("DOMContentLoaded", function () {
            // Get elements
            const form = document.getElementById("receipt-form");
            const generateBtn = document.getElementById("generate-btn");
            const downloadBtn = document.getElementById("download-btn");
            const downloadImgBtn = document.getElementById("download-img-btn");
            const printBtn = document.getElementById("print-btn");
            const receiptSection = document.getElementById("receipt-section");
            const quoteSection = document.getElementById("quote-section");
            const successMessage = document.getElementById("success-message");

            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById("date").value = today;

            // Format date function
            function formatDate(dateString) {
                const date = new Date(dateString);
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                return `${day}/${month}/${year}`;
            }

            // Show success message function
            function showSuccessMessage(message) {
                successMessage.textContent = message;
                successMessage.style.display = "block";

                // Hide message after 3 seconds
                setTimeout(() => {
                    successMessage.style.display = "none";
                }, 6000);
            }

            // Generate receipt
            generateBtn.addEventListener("click", function () {
                // Validate form
                const isValid = form.checkValidity();
                if (!isValid) {
                    form.reportValidity();
                    return;
                }

                // Get form values
                const name = document.getElementById("name").value;
                const receiptNo = document.getElementById("receiptNo").value;
                const rollNo = document.getElementById("rollNo").value;
                const year = document.getElementById("year").value;
                const branch = document.getElementById("receiptBranch").value;
                const date = document.getElementById("date").value;
                const transactionId = document.getElementById("transactionId").value;
                const utrNumber = document.getElementById("utrNumber").value;
                const amount = document.getElementById("amount").value;
                const feeType = document.getElementById("receiptFeeType").value;

                // Update receipt
                document.getElementById("receipt-name").textContent = name;
                document.getElementById("receipt-no").textContent = receiptNo;
                document.getElementById("receipt-roll").textContent = rollNo;
                document.getElementById("receipt-year").textContent = year;
                document.getElementById("receipt-branch").textContent = branch;
                document.getElementById("receipt-date").textContent = formatDate(date);
                document.getElementById("receipt-transaction-id").textContent = transactionId;
                document.getElementById("receipt-utr-number").textContent = utrNumber;
                document.getElementById("receipt-amount").textContent = amount;
                document.getElementById("receipt-fee-type").textContent = feeType;

                // Show receipt and quote sections
                receiptSection.style.display = "block";
                quoteSection.style.display = "block";

                // Scroll to receipt
                receiptSection.scrollIntoView({ behavior: "smooth" });

                // Show success message
                showSuccessMessage("Receipt generated successfully!");
            });

            // Download receipt as PDF
            downloadBtn.addEventListener("click", function () {
                const receipt = document.getElementById("receipt");
                const quoteSection = document.getElementById("quote-section");

                // Get student name for filename
                const studentName = document.getElementById("name").value;
                const receiptNo = document.getElementById("receiptNo").value;
                const filename = `VEMU_Receipt_${studentName}_${receiptNo}.pdf`;

                // Show processing message
                showSuccessMessage("Generating PDF, please wait...");

                // Create a clone of the receipt with proper styling
                const receiptClone = receipt.cloneNode(true);
                const container = document.createElement('div');
                container.style.backgroundColor = 'white';
                container.style.padding = '20px';
                container.appendChild(receiptClone);

                // Add quote section
                const quoteDiv = document.createElement('div');
                quoteDiv.innerHTML = quoteSection.innerHTML;
                quoteDiv.style.marginTop = '20px';
                quoteDiv.style.padding = '15px';
                quoteDiv.style.borderLeft = '5px solid #4caf50';
                quoteDiv.style.backgroundColor = '#e8f5e9';
                quoteDiv.style.fontStyle = 'italic';
                quoteDiv.style.textAlign = 'center';
                container.appendChild(quoteDiv);

                // Configure pdf options
                const options = {
                    margin: [10, 10, 10, 10],
                    filename: filename,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true, logging: false },
                    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                };

                // Generate PDF
                html2pdf()
                    .from(container)
                    .set(options)
                    .save()
                    .then(() => {
                        showSuccessMessage("PDF downloaded successfully!");
                    })
                    .catch(err => {
                        console.error('Error generating PDF:', err);
                        showSuccessMessage("Error generating PDF. Please try again.");
                    });
            });

            // Download receipt as image
            downloadImgBtn.addEventListener("click", function () {
                const receipt = document.getElementById("receipt");
                const quoteSection = document.getElementById("quote-section");

                // Get student name for filename
                const studentName = document.getElementById("name").value;
                const receiptNo = document.getElementById("receiptNo").value;
                const filename = `VEMU_Receipt_${studentName}_${receiptNo}.png`;

                // Show processing message
                showSuccessMessage("Generating image, please wait...");

                // Create a container with receipt and quote
                const container = document.createElement('div');
                container.style.backgroundColor = 'white';
                container.style.padding = '20px';
                container.style.width = receipt.offsetWidth + 'px';

                // Clone receipt to avoid modifying the original
                const receiptClone = receipt.cloneNode(true);
                container.appendChild(receiptClone);

                // Add quote
                const quoteDiv = document.createElement('div');
                quoteDiv.innerHTML = quoteSection.innerHTML;
                quoteDiv.style.marginTop = '20px';
                quoteDiv.style.padding = '15px';
                quoteDiv.style.borderLeft = '5px solid #4caf50';
                quoteDiv.style.backgroundColor = '#e8f5e9';
                quoteDiv.style.fontStyle = 'italic';
                quoteDiv.style.textAlign = 'center';
                container.appendChild(quoteDiv);

                // Append to body temporarily (but hide it)
                container.style.position = 'absolute';
                container.style.left = '-9999px';
                document.body.appendChild(container);

                // Use html2canvas to create image
                html2canvas(container, {
                    scale: 2,
                    backgroundColor: 'white',
                    logging: false,
                    useCORS: true,
                    allowTaint: true
                }).then(canvas => {
                    try {
                        // Convert to image and download
                        const imgData = canvas.toDataURL('image/png');
                        const link = document.createElement('a');
                        link.download = filename;
                        link.href = imgData;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);

                        // Show success message
                        showSuccessMessage("Image downloaded successfully!");
                    } catch (err) {
                        console.error('Error saving image:', err);
                        showSuccessMessage("Error saving image. Please try again.");
                    }

                    // Clean up
                    document.body.removeChild(container);
                }).catch(err => {
                    console.error('Error generating image:', err);
                    showSuccessMessage("Error generating image. Please try again.");
                    document.body.removeChild(container);
                });
            });

            // Print receipt
            printBtn.addEventListener("click", function () {
                // Show success message
                showSuccessMessage("Preparing to print...");

                // Short timeout to allow the message to show before print dialog
                setTimeout(() => {
                    window.print();
                }, 300);
            });

            // Reset form handler
            document.querySelector('.reset-btn').addEventListener('click', function () {
                // Hide receipt section when form is reset
                receiptSection.style.display = 'none';
                quoteSection.style.display = 'none';

                // Reset date to today
                setTimeout(() => {
                    document.getElementById("date").value = today;
                }, 10);
            });
        });

    </script>
</body>

</html>